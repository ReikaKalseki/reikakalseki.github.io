(self.webpackChunksitecore=self.webpackChunksitecore||[]).push([[647],{647:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>h});var r=n(621),o=n(212);function a(e,t){let n=document.createElement("div");return n.className="tile-p2-"+t,e.appendChild(n),n}function l(e,t,n,r,o,l){let i=a(e,t);i.style.position="relative",i.style.top=r.toString()+"px",i.style.left=n.toString()+"px",i.style.width=o.toString()+"px",i.style.height=l.toString()+"px"}function i(e,t,n,r,o,a,l){return l}function c(e,t,n,o,a,l){for(var i=(0,r.sc)(1,6),c=(0,r.sc)(1,3),d=(0,r.sc)(0,o-1),h=(0,r.sc)(0,n-1),u=Math.min(d+i,o),m=Math.min(h+c,n),f=d;f<u;f++)for(var p=h;p<m;p++){var v="white"+(0,r.sc)(0,3),y=(0,r.Yy)(o,f,p);e[y]=v,a&&Math.random()<.1?(s(t,y,"portal_b"),a=!1):l&&Math.random()<.1&&(s(t,y,"portal_o"),l=!1)}return[a,l]}function d(e,t,n,o,a){var l=Math.random()<.5?Math.random()<.5?"lightbridge":"laser":r.hm?"funnel_xmas":Math.random()<.35?"funnel_o":"funnel",i=0==o?1:0,c=1-i;for(l+=0==i?"_v":"_h";o<n&&a<t;)s(e,(0,r.Yy)(n,o,a),l),o+=i,a+=c}function s(e,t,n){1==e[t].length&&"air"==e[t][0]&&(e[t]=[]),e[t].push(n)}function h(){if(o.M)return;document.body,document.documentElement;var e=document.body.offsetHeight,t=Math.max(window.innerWidth,document.body.clientWidth);let n=Math.ceil(e/128),s=Math.ceil(t/128);console.log("Generating portal tileset with "+s+" columns and "+n+" rows");let h=new Array(s*n),u=new Array(s*n);for(var m=0;m<s;m++)for(var f=0;f<n;f++){var p="black"+(0,r.sc)(0,15),v=(0,r.Yy)(s,m,f);h[v]=p,u[v]=["air"]}let y=!0,g=!0;for(m=0;m<n/4;m++){var M=c(h,u,n,s,y,g);y=M[0],g=M[1]}!function(e,t,n){for(var r=1;r<t-1;r++)Math.random()<.1&&d(e,t,n,0,r);for(r=1;r<n-1;r++)Math.random()<.1&&d(e,t,n,r,0)}(u,n,s);let b="background-content",w=document.getElementById(b);for(null==w&&(w=document.createElement("div"),w.id=b,console.log("Injecting background element."),document.body.prepend(w));w.firstChild;)w.removeChild(w.firstChild);let k=document.createElement("div");w.appendChild(k),k.className="tile-layer",w.style.display="block",function(e,t,n,o,c){for(var d=0,s=0,h=[],u=0;u<t;u++){d=0;let t=document.createElement("div");for(var m=0;m<n;m++){let e=(0,r.Yy)(n,m,u),l=c[e],v=t;if(v=a(v,o[e]),(0,r.w7)()&&(v=a(v,"dark")),1!=l.length||"air"!=l[0])for(var f=0;f<l.length;f++){var p=l[f];"air"!=p&&(v=a(v,p=i(0,0,0,0,0,0,p)),r.hm&&p.startsWith("laser")&&h.push({element:v,x:d,y:s}))}d+=128}e.appendChild(t),s+=128}for(m=0;m<h.length;m++){let e=h[m];for(var v=(0,r.sc)(4,9),y=0;y<v;y++)l(e.element,"laser_snow",(0,r.sc)(-36,116),(0,r.sc)(-36,116),48,48)}(0,r.xE)(e,1)}(k,n,s,h,u)}}}]);
//# sourceMappingURL=647.bundle.js.map