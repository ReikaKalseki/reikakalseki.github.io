{"version":3,"sources":["webpack://sitecore/./changeloader_rawscript.ts"],"names":["setSelectedGameVersion","btn","ver","dataset","value","div","document","getElementById","innerHTML","box","scrollTop","used","children","i","length","entry","name","includes","push","button","createElement","type","className","id","date","modset","addEventListener","setSelectedModVersion","appendChild","list","getElementsByClassName","classList","remove","add","updateChangeData","toggleAllModChecks","btns","ref","checked","text","gv","mv","gameVer","modVer","showMods","mods","obj","mod","key","nameappend","split","filter","init"],"mappings":"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","file":"763.bundle.js","sourcesContent":["function selectNewestVersions(btn) {\r\n    setSelectedGameVersion(document.getElementById(\"newestgamever\"));\r\n    setSelectedModVersion(document.getElementById(\"newestmodver\"));\r\n}\r\nfunction setSelectedGameVersion(btn) {\r\n    let ver = btn.dataset.value;\r\n    let div = document.getElementById(\"game-version-cache\");\r\n    div.innerHTML = ver;\r\n    div = document.getElementById(\"mod-version-list-\" + ver);\r\n    let box = document.getElementById(\"modver-box\");\r\n    box.innerHTML = \"\";\r\n    div.scrollTop = 0;\r\n    let used = [];\r\n    let children = div.children;\r\n    for (let i = 0; i < children.length; i++) {\r\n        let entry = children[i]; //mod-version-list-entry\r\n        let name = entry.innerHTML;\r\n        if (used.includes(name))\r\n            continue;\r\n        used.push(name);\r\n        let button = document.createElement(\"button\");\r\n        button.type = \"button\";\r\n        button.className = \"verbtn-mod\";\r\n        if (i == 0)\r\n            button.id = \"newestmodver\";\r\n        button.dataset.value = name;\r\n        button.dataset.date = entry.dataset.date;\r\n        button.dataset.modset = entry.dataset.modset;\r\n        button.innerHTML = '<span><div class = \"modver-width\">' + name + '</div><i class=\"fas fa-angle-right\"></i></span>';\r\n        button.addEventListener(\"click\", function () { setSelectedModVersion(button); });\r\n        box.appendChild(button);\r\n        //box.innerHTML += '<button type=\"button\" class = \"verbtn-mod\" data-value = \"' + name + '\" data-date = \"' + entry.dataset.date + '\" onclick = \"setSelectedModVersion(this)\"><span><div class = \"modver-width\">' + name + '</div><i class=\"fas fa-angle-right\"></i></span></button><br>'\r\n    }\r\n    let list = document.getElementsByClassName(\"selver-game\");\r\n    for (let i = 0; i < list.length; i++) {\r\n        list[i].classList.remove(\"selver-game\");\r\n    }\r\n    btn.classList.add(\"selver-game\");\r\n    let data = document.getElementById(\"changedata\");\r\n    data.innerHTML = document.getElementById(\"changedata-empty-cache\").innerHTML;\r\n    document.getElementById(\"changedata-header\").innerHTML = \"Changes\";\r\n    updateChangeData();\r\n}\r\nfunction setSelectedModVersion(btn) {\r\n    //if (btn == null)\r\n    //\treturn;\r\n    let ver = btn.dataset.value;\r\n    let div = document.getElementById(\"mod-version-cache\");\r\n    div.innerHTML = ver;\r\n    div.dataset.date = btn.dataset.date;\r\n    div.dataset.modset = btn.dataset.modset;\r\n    if (div.dataset.date != \"\")\r\n        div.dataset.date = \" (\" + div.dataset.date + \")\";\r\n    //console.log(ver+\" on \"+div.dataset.date);\r\n    var list = document.getElementsByClassName(\"selver-mod\");\r\n    for (var i = 0; i < list.length; i++) {\r\n        list[i].classList.remove(\"selver-mod\");\r\n    }\r\n    btn.classList.add(\"selver-mod\");\r\n    updateChangeData();\r\n}\r\nfunction toggleAllModChecks() {\r\n    var btns = document.getElementsByClassName(\"modchangecheck\");\r\n    let ref = document.getElementById(\"allmodcheck\");\r\n    for (var i = 0; i < btns.length; i++) {\r\n        let btn = btns[i];\r\n        if (btn == ref)\r\n            continue;\r\n        btn.checked = ref.checked;\r\n    }\r\n    updateChangeData();\r\n}\r\nfunction updateChangeData() {\r\n    let text = document.getElementById(\"changedata\");\r\n    let gv = document.getElementById(\"game-version-cache\");\r\n    let mv = document.getElementById(\"mod-version-cache\");\r\n    let gameVer = gv.innerHTML;\r\n    let modVer = mv.innerHTML;\r\n    let showMods = true;\r\n    if (modVer == null || modVer == \"\" || typeof (modVer) == \"undefined\")\r\n        showMods = false;\r\n    // text.innerHTML = \"<h2 class = \\\"changelog-version-title\\\">\"+modVer+\" [\"+gameVer+\"]\"+mv.dataset.date+\"</h2>\";\r\n    if (showMods) {\r\n        text.innerHTML = \"\";\r\n        let header = document.getElementById(\"changedata-header\");\r\n        header.innerHTML = \"Changes in \" + modVer + \" [\" + gameVer + \"]\" + mv.dataset.date + \":\";\r\n    }\r\n    let mods = [];\r\n    var list = document.getElementsByClassName(\"modchangecheck\");\r\n    for (var i = 0; i < list.length; i++) {\r\n        let obj = list[i];\r\n        let mod = obj.dataset.value; //keyname\r\n        if (mod == \"all\")\r\n            continue;\r\n        if (obj.checked == true) {\r\n            mods.push(mod);\r\n            if (showMods) {\r\n                var key = gameVer + \"|\" + modVer + \"|\" + mod;\r\n                var div = document.getElementById(key);\r\n                //console.log(\"'\"+key+\"' > \"+div);\r\n                if (div != null) {\r\n                    text.innerHTML += \"<h3>\" + obj.dataset.mod + div.dataset.nameappend + \"</h3>\" + div.innerHTML + \"<br>\";\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (showMods && text.innerHTML == \"\") {\r\n        text.innerHTML = \"There are no changes in this version for the mods you have selected.\";\r\n    }\r\n    let btns = document.getElementsByClassName(\"verbtn-mod\");\r\n    for (var i = 0; i < btns.length; i++) {\r\n        let btn = btns[i];\r\n        let btnmods = btn.dataset.modset.split(\"|\");\r\n        let shared = btnmods.filter(value => mods.includes(value));\r\n        if (shared.length > 0)\r\n            btn.classList.remove(\"empty-mod\");\r\n        else\r\n            btn.classList.add(\"empty-mod\");\r\n        //console.log(\"Modver button \"+btn.dataset.value+\" (\"+btnmods+\") intersection with active (\"+mods+\"): \"+shared);\r\n    }\r\n}\r\nexport default function init() {\r\n    var btns = document.getElementsByClassName(\"modchangecheck\");\r\n    for (var i = 0; i < btns.length; i++) {\r\n        let btn = btns[i];\r\n        if (btn.dataset.value == \"all\") {\r\n            btn.addEventListener(\"click\", toggleAllModChecks);\r\n            btn.id = \"allmodcheck\";\r\n        }\r\n        else {\r\n            btn.addEventListener(\"click\", updateChangeData);\r\n        }\r\n    }\r\n    btns = document.getElementsByClassName(\"verbtn-game\");\r\n    for (var i = 0; i < btns.length; i++) {\r\n        let btn = btns[i];\r\n        btn.addEventListener(\"click\", function () { setSelectedGameVersion(btn); });\r\n    }\r\n    let newest = document.getElementById(\"newverbtn\");\r\n    newest.addEventListener(\"click\", function () { selectNewestVersions(newest); });\r\n    //setSelectedModVersion(null);\r\n}\r\n"],"sourceRoot":""}