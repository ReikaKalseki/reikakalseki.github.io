{"version":3,"sources":["webpack://sitecore/./changeloader_rawscript.ts"],"names":["setSelectedGameVersion","btn","ver","dataset","value","div","document","getElementById","innerHTML","box","scrollTop","used","Map","children","i","length","entry","name","prev","get","modset","console","log","button","createElement","set","type","className","id","date","addEventListener","setSelectedModVersion","appendChild","list","getElementsByClassName","classList","remove","add","updateChangeData","toggleAllModChecks","btns","ref","checked","text","gv","mv","gameVer","modVer","showMods","mods","obj","mod","push","key","nameappend","split","filter","includes","init"],"mappings":"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","file":"763.bundle.js","sourcesContent":["function selectNewestVersions(btn) {\r\n    setSelectedGameVersion(document.getElementById(\"newestgamever\"));\r\n    setSelectedModVersion(document.getElementById(\"newestmodver\"));\r\n}\r\nfunction setSelectedGameVersion(btn) {\r\n    let ver = btn.dataset.value;\r\n    let div = document.getElementById(\"game-version-cache\");\r\n    div.innerHTML = ver;\r\n    div = document.getElementById(\"mod-version-list-\" + ver);\r\n    let box = document.getElementById(\"modver-box\");\r\n    box.innerHTML = \"\";\r\n    div.scrollTop = 0;\r\n    let used = new Map();\r\n    let children = div.children;\r\n    for (let i = 0; i < children.length; i++) {\r\n        let entry = children[i]; //mod-version-list-entry\r\n        let name = entry.innerHTML;\r\n        let prev = used.get(name);\r\n        if (prev) {\r\n            prev.dataset.modset = (prev.dataset.modset ? prev.dataset.modset + \"|\" : \"\") + entry.dataset.modset;\r\n            console.log(\"Injecting \" + entry.dataset.modset + \" into \" + prev);\r\n            continue;\r\n        }\r\n        let button = document.createElement(\"button\");\r\n        used.set(name, button);\r\n        button.type = \"button\";\r\n        button.className = \"verbtn-mod\";\r\n        if (i == 0)\r\n            button.id = \"newestmodver\";\r\n        button.dataset.value = name;\r\n        button.dataset.date = entry.dataset.date;\r\n        button.dataset.modset = entry.dataset.modset;\r\n        button.innerHTML = '<span><div class = \"modver-width\">' + name + '</div><i class=\"fas fa-angle-right\"></i></span>';\r\n        button.addEventListener(\"click\", function () { setSelectedModVersion(button); });\r\n        box.appendChild(button);\r\n        //box.innerHTML += '<button type=\"button\" class = \"verbtn-mod\" data-value = \"' + name + '\" data-date = \"' + entry.dataset.date + '\" onclick = \"setSelectedModVersion(this)\"><span><div class = \"modver-width\">' + name + '</div><i class=\"fas fa-angle-right\"></i></span></button><br>'\r\n    }\r\n    let list = document.getElementsByClassName(\"selver-game\");\r\n    for (let i = 0; i < list.length; i++) {\r\n        list[i].classList.remove(\"selver-game\");\r\n    }\r\n    btn.classList.add(\"selver-game\");\r\n    let data = document.getElementById(\"changedata\");\r\n    data.innerHTML = document.getElementById(\"changedata-empty-cache\").innerHTML;\r\n    document.getElementById(\"changedata-header\").innerHTML = \"Changes\";\r\n    updateChangeData();\r\n}\r\nfunction setSelectedModVersion(btn) {\r\n    //if (btn == null)\r\n    //\treturn;\r\n    let ver = btn.dataset.value;\r\n    let div = document.getElementById(\"mod-version-cache\");\r\n    div.innerHTML = ver;\r\n    div.dataset.date = btn.dataset.date;\r\n    div.dataset.modset = btn.dataset.modset;\r\n    if (div.dataset.date != \"\")\r\n        div.dataset.date = \" (\" + div.dataset.date + \")\";\r\n    //console.log(ver+\" on \"+div.dataset.date);\r\n    var list = document.getElementsByClassName(\"selver-mod\");\r\n    for (var i = 0; i < list.length; i++) {\r\n        list[i].classList.remove(\"selver-mod\");\r\n    }\r\n    btn.classList.add(\"selver-mod\");\r\n    updateChangeData();\r\n}\r\nfunction toggleAllModChecks() {\r\n    var btns = document.getElementsByClassName(\"modchangecheck\");\r\n    let ref = document.getElementById(\"allmodcheck\");\r\n    for (var i = 0; i < btns.length; i++) {\r\n        let btn = btns[i];\r\n        if (btn == ref)\r\n            continue;\r\n        btn.checked = ref.checked;\r\n    }\r\n    updateChangeData();\r\n}\r\nfunction updateChangeData() {\r\n    let text = document.getElementById(\"changedata\");\r\n    let gv = document.getElementById(\"game-version-cache\");\r\n    let mv = document.getElementById(\"mod-version-cache\");\r\n    let gameVer = gv.innerHTML;\r\n    let modVer = mv.innerHTML;\r\n    let showMods = true;\r\n    if (modVer == null || modVer == \"\" || typeof (modVer) == \"undefined\")\r\n        showMods = false;\r\n    // text.innerHTML = \"<h2 class = \\\"changelog-version-title\\\">\"+modVer+\" [\"+gameVer+\"]\"+mv.dataset.date+\"</h2>\";\r\n    if (showMods) {\r\n        text.innerHTML = \"\";\r\n        let header = document.getElementById(\"changedata-header\");\r\n        header.innerHTML = \"Changes in \" + modVer + \" [\" + gameVer + \"]\" + mv.dataset.date + \":\";\r\n    }\r\n    let mods = [];\r\n    let list = document.getElementsByClassName(\"modchangecheck\");\r\n    for (var i = 0; i < list.length; i++) {\r\n        let obj = list[i];\r\n        let mod = obj.dataset.value; //keyname\r\n        if (mod == \"all\")\r\n            continue;\r\n        if (obj.checked == true) {\r\n            mods.push(mod);\r\n            if (showMods) {\r\n                var key = gameVer + \"|\" + modVer + \"|\" + mod;\r\n                var div = document.getElementById(key);\r\n                //console.log(\"'\"+key+\"' > \"+div);\r\n                if (div != null) {\r\n                    text.innerHTML += \"<h3>\" + obj.dataset.mod + div.dataset.nameappend + \"</h3>\" + div.innerHTML + \"<br>\";\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (showMods && text.innerHTML == \"\") {\r\n        text.innerHTML = \"There are no changes in this version for the mods you have selected.\";\r\n    }\r\n    let btns = document.getElementsByClassName(\"verbtn-mod\");\r\n    for (let i = 0; i < btns.length; i++) {\r\n        let btn = btns[i];\r\n        let btnmods = btn.dataset.modset.split(\"|\");\r\n        let shared = btnmods.filter(value => mods.includes(value));\r\n        if (shared.length > 0)\r\n            btn.classList.remove(\"empty-mod\");\r\n        else\r\n            btn.classList.add(\"empty-mod\");\r\n        //console.log(\"Modver button \"+btn.dataset.value+\" (\"+btnmods+\") intersection with active (\"+mods+\"): \"+shared);\r\n    }\r\n}\r\nexport default function init() {\r\n    let btns = document.getElementsByClassName(\"modchangecheck\");\r\n    for (let i = 0; i < btns.length; i++) {\r\n        let btn = btns[i];\r\n        if (btn.dataset.value == \"all\") {\r\n            btn.addEventListener(\"click\", toggleAllModChecks);\r\n            btn.id = \"allmodcheck\";\r\n        }\r\n        else {\r\n            btn.addEventListener(\"click\", updateChangeData);\r\n        }\r\n    }\r\n    btns = document.getElementsByClassName(\"verbtn-game\");\r\n    for (var i = 0; i < btns.length; i++) {\r\n        let btn = btns[i];\r\n        btn.addEventListener(\"click\", function () { setSelectedGameVersion(btn); });\r\n    }\r\n    let newest = document.getElementById(\"newverbtn\");\r\n    newest.addEventListener(\"click\", function () { selectNewestVersions(newest); });\r\n    //setSelectedModVersion(null);\r\n}\r\n"],"sourceRoot":""}