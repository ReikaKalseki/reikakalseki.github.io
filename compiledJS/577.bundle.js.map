{"version":3,"sources":["webpack://sitecore/./quicknav-pos_rawscript.ts"],"names":["pos","active","applyHooks","toc","document","getElementById","getBoundingClientRect","top","addEventListener","updateNavPosition","maxWait","check","saved","checked","updateTOCFollowStatus","style","toString","val","Math","max","window","scrollY"],"mappings":"sJAEA,IAAIA,EAAM,EACNC,GAAS,EACE,SAASC,IACpB,IAAIC,EAAMC,SAASC,eAAe,iBAClCL,EAAMG,EAAIG,wBAAwBC,IAAM,MACxCH,SAASI,iBAAiB,UAAU,QAAS,WAAcC,EAAkBN,KAAS,GAAI,CAAEO,QAAS,OACrG,IAAIC,EAAQP,SAASC,eAAe,qBAChCO,GAAQ,QAAkC,mBACjC,MAATA,IACAD,EAAME,QAAUD,GACpBX,EAASU,EAAME,QACfF,EAAMH,iBAAiB,QAASM,GAEpC,SAASA,IACL,IAAIX,EAAMC,SAASC,eAAe,iBAC9BM,EAAQP,SAASC,eAAe,qBACpCJ,EAASU,EAAME,QACXF,EAAME,QACNJ,EAAkBN,GAGlBA,EAAIY,MAAMR,IAAMP,EAAM,MAE1B,QAAmB,kBAAmBC,EAAOe,YAEjD,SAASP,EAAkBN,GACvB,IAAKF,EACD,OAOJ,IAAIgB,EAAMC,KAAKC,IAAInB,EAAKoB,OAAOC,QAAU,GAKzClB,EAAIY,MAAMR,IAAMU,EAAM","file":"577.bundle.js","sourcesContent":["import { debounce } from \"ts-debounce\";\r\nimport { loadCachedVariableAsBooleanOrNull, saveCachedVariable } from \"./library\";\r\nlet pos = 0;\r\nlet active = false;\r\nexport default function applyHooks() {\r\n    let toc = document.getElementById(\"toc_container\");\r\n    pos = toc.getBoundingClientRect().top - 14.25;\r\n    document.addEventListener(\"scroll\", debounce(function () { updateNavPosition(toc); }, 50, { maxWait: 500 }));\r\n    let check = document.getElementById(\"toc-follow-toggle\");\r\n    let saved = loadCachedVariableAsBooleanOrNull(\"quicknav-scroll\");\r\n    if (saved != null)\r\n        check.checked = saved;\r\n    active = check.checked;\r\n    check.addEventListener(\"click\", updateTOCFollowStatus);\r\n}\r\nfunction updateTOCFollowStatus() {\r\n    let toc = document.getElementById(\"toc_container\");\r\n    let check = document.getElementById(\"toc-follow-toggle\");\r\n    active = check.checked;\r\n    if (check.checked) {\r\n        updateNavPosition(toc);\r\n    }\r\n    else {\r\n        toc.style.top = pos + \"px\";\r\n    }\r\n    saveCachedVariable(\"quicknav-scroll\", active.toString());\r\n}\r\nfunction updateNavPosition(toc) {\r\n    if (!active)\r\n        return;\r\n    // let toc = document.getElementById(\"toc_container\") as HTMLElement;\r\n    //let text = (document.getElementById(\"textarea\") as HTMLElement).getBoundingClientRect().top;\r\n    //let nav = (document.getElementById(\"navbar\") as HTMLElement).getBoundingClientRect();\r\n    // let pad = text-nav.bottom;\r\n    //console.log(\"Screen scroll is \"+window.scrollY+\"; nav bounds are \"+nav.top+\" > \"+nav.bottom+\"; text begins at \"+text.getBoundingClientRect().top+\" -> pad =\"+pad);\r\n    // window.requestAnimationFrame(function(){toc.style.top = Math.max(text, window.scrollY+4)+\"px\"});\r\n    let val = Math.max(pos, window.scrollY + 6);\r\n    /*\r\n    if (window.scrollY >= pos) {\r\n         val = Math.min(val);\r\n    }*/\r\n    toc.style.top = val + \"px\";\r\n}\r\n"],"sourceRoot":""}