(self.webpackChunksitecore=self.webpackChunksitecore||[]).push([[647],{938:(e,t,n)=>{"use strict";function r(e,t,n){var r,o,i;void 0===t&&(t=50),void 0===n&&(n={});var a=null!=(r=n.isImmediate)&&r,l=null!=(o=n.callback)&&o,c=n.maxWait,d=Date.now(),s=[];function u(){if(void 0!==c){var e=Date.now()-d;if(e+t>=c)return c-e}return t}var f=function(){var t=[].slice.call(arguments),n=this;return new Promise((function(r,o){var c=a&&void 0===i;if(void 0!==i&&clearTimeout(i),i=setTimeout((function(){if(i=void 0,d=Date.now(),!a){var r=e.apply(n,t);l&&l(r),s.forEach((function(e){return(0,e.resolve)(r)})),s=[]}}),u()),c){var f=e.apply(n,t);return l&&l(f),r(f)}s.push({resolve:r,reject:o})}))};return f.cancel=function(e){void 0!==i&&clearTimeout(i),s.forEach((function(t){return(0,t.reject)(e)})),s=[]},f}n.d(t,{D:()=>r})},647:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var r=n(938),o=n(621),i=n(212);function a(e,t){let n=document.createElement("div");return n.className="tile-p2-"+t,e.appendChild(n),n}function l(e,t,n,r,o,i){let l=a(e,t);l.style.position="absolute",l.style.top=r.toString()+"px",l.style.left=n.toString()+"px",l.style.width=o.toString()+"px",l.style.height=i.toString()+"px"}function c(e,t,n,r,o,i,a){return a}function d(e,t,n,r,i,a){for(var l=(0,o.sc)(1,6),c=(0,o.sc)(1,3),d=(0,o.sc)(0,r-1),s=(0,o.sc)(0,n-1),f=Math.min(d+l,r),h=Math.min(s+c,n),m=d;m<f;m++)for(var v=s;v<h;v++){var p="white"+(0,o.sc)(0,3),g=(0,o.Yy)(r,m,v);e[g]=p,i&&Math.random()<.1?(u(t,g,"portal_b"),i=!1):a&&Math.random()<.1&&(u(t,g,"portal_o"),a=!1)}return[i,a]}function s(e,t,n,r,i){var a=Math.random()<.5?Math.random()<.5?"lightbridge":"laser":o.hm?"funnel_xmas":Math.random()<.35?"funnel_o":"funnel",l=0==r?1:0,c=1-l;for(a+=0==l?"_v":"_h";r<n&&i<t;)u(e,(0,o.Yy)(n,r,i),a),r+=l,i+=c}function u(e,t,n){1==e[t].length&&"air"==e[t][0]&&(e[t]=[]),e[t].push(n)}function f(){if(i.M)return;let e=document.body,t=document.documentElement;var n=Math.max(e.offsetHeight,t.clientHeight,t.offsetHeight,window.innerHeight,document.body.clientHeight),r=Math.max(window.innerWidth,document.body.clientWidth);let u=Math.ceil(n/128),f=Math.ceil(r/128);console.log("Generating portal tileset with "+f+" columns and "+u+" rows");let h=new Array(f*u),m=new Array(f*u);for(var v=0;v<f;v++)for(var p=0;p<u;p++){var g="black"+(0,o.sc)(0,15),y=(0,o.Yy)(f,v,p);h[y]=g,m[y]=["air"]}let w=!0,b=!0;for(v=0;v<u/4;v++){var x=d(h,m,u,f,w,b);w=x[0],b=x[1]}!function(e,t,n){for(var r=1;r<t-1;r++)Math.random()<.1&&s(e,t,n,0,r);for(r=1;r<n-1;r++)Math.random()<.1&&s(e,t,n,r,0)}(m,u,f);let M="background-content",k=document.getElementById(M);for(null==k&&(k=document.createElement("div"),k.id=M,console.log("Injecting background element."),document.body.prepend(k));k.firstChild;)k.removeChild(k.firstChild);let E=document.createElement("div");k.appendChild(E),E.className="tile-layer",k.style.width=r.toString()+"px",k.style.height=n.toString()+"px",k.style.display="block",function(e,t,n,r,i){for(var d=0,s=0,u=[],f=0;f<t;f++){d=0;let t=document.createElement("div");for(var h=0;h<n;h++){let e=(0,o.Yy)(n,h,f),l=i[e],p=t;if(p=a(p,r[e]),(0,o.w7)()&&(p=a(p,"dark")),1!=l.length||"air"!=l[0])for(var m=0;m<l.length;m++){var v=l[m];"air"!=v&&(p=a(p,v=c(0,0,0,0,0,0,v)),o.hm&&v.startsWith("laser")&&u.push({element:p,x:d,y:s}))}d+=128}e.appendChild(t),s+=128}for(h=0;h<u.length;h++){let e=u[h];for(var p=(0,o.sc)(4,9),g=0;g<p;g++)l(e.element,"laser_snow",(0,o.sc)(e.x-36,e.x+128-12),(0,o.sc)(e.y-36,e.y+128-12),48,48)}(0,o.xE)(e,1)}(E,u,f,h,m)}window.addEventListener("resize",(0,r.D)(f,100))}}]);
//# sourceMappingURL=647.bundle.js.map