(self.webpackChunksitecore=self.webpackChunksitecore||[]).push([[647],{647:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>h});var r=n(621),o=n(212);function a(t,e){let n=document.createElement("div");return n.className="tile-p2-"+e,t.appendChild(n),n}function l(t,e,n,r,o,l){let i=a(t,e);i.style.position="relative",i.style.top=r.toString()+"px",i.style.left=n.toString()+"px",i.style.width=o.toString()+"px",i.style.height=l.toString()+"px",t.classList.add("entity-layer")}function i(t,e,n,r,o,a,l){return l}function c(t,e,n,o,a,l){for(var i=(0,r.sc)(1,6),c=(0,r.sc)(1,3),d=(0,r.sc)(0,o-1),h=(0,r.sc)(0,n-1),u=Math.min(d+i,o),m=Math.min(h+c,n),f=d;f<u;f++)for(var p=h;p<m;p++){var y="white"+(0,r.sc)(0,3),v=(0,r.Yy)(o,n,f,p);t[v]=y,a&&Math.random()<.1?(s(e,v,"portal_b"),a=!1):l&&Math.random()<.1&&(s(e,v,"portal_o"),l=!1)}return[a,l]}function d(t,e,n,o,a){var l=Math.random()<.5?Math.random()<.5?"lightbridge":"laser":r.hm?"funnel_xmas":Math.random()<.35?"funnel_o":"funnel",i=0==o?1:0,c=1-i;for(l+=0==i?"_v":"_h";o<n&&a<e;)s(t,(0,r.Yy)(n,e,o,a),l),o+=i,a+=c}function s(t,e,n){1==t[e].length&&"air"==t[e][0]&&(t[e]=[]),t[e].push(n)}function h(){if(o.M)return;document.body,document.documentElement;var t=document.body.offsetHeight,e=Math.max(window.innerWidth,document.body.clientWidth);let n=Math.ceil(t/128),s=Math.ceil(e/128);console.log("Generating portal tileset with "+s+" columns and "+n+" rows");let h=new Array(s*n),u=new Array(s*n);for(var m=0;m<s;m++)for(var f=0;f<n;f++){var p="black"+(0,r.sc)(0,15),y=(0,r.Yy)(s,n,m,f);h[y]=p,u[y]=["air"]}let v=!0,g=!0;for(m=0;m<n/4;m++){var w=c(h,u,n,s,v,g);v=w[0],g=w[1]}!function(t,e,n){for(var r=1;r<e-1;r++)Math.random()<.1&&d(t,e,n,0,r);for(r=1;r<n-1;r++)Math.random()<.1&&d(t,e,n,r,0)}(u,n,s);let M="background-content",b=document.getElementById(M);for(null==b&&(b=document.createElement("div"),b.id=M,console.log("Injecting background element."),document.body.prepend(b));b.firstChild;)b.removeChild(b.firstChild);let x=document.createElement("div");b.appendChild(x),x.className="tile-layer",x.style.width=e.toString()+"px",x.style.height=t.toString()+"px",b.style.display="block",function(t,e,n,o,c){for(var d=0,s=0,h=[],u=0;u<e;u++){d=0;let l=document.createElement("div");for(var m=0;m<n;m++){let t=(0,r.Yy)(n,e,m,u),y=c[t],v=l;if(v=a(v,o[t]),(0,r.w7)()&&(v=a(v,"dark")),1!=y.length||"air"!=y[0])for(var f=0;f<y.length;f++){var p=y[f];"air"!=p&&(v=a(v,p=i(0,0,0,0,0,0,p)),r.hm&&p.startsWith("laser")&&h.push({element:v,x:d,y:s}))}d+=128}t.appendChild(l),s+=128}for(m=0;m<h.length;m++){let t=h[m];for(var y=(0,r.sc)(4,9),v=0;v<y;v++)l(t.element,"laser_snow",(0,r.sc)(-36,116),(0,r.sc)(-36,116),48,48)}(0,r.xE)(t,1)}(x,n,s,h,u)}}}]);
//# sourceMappingURL=647.bundle.js.map