{"version":3,"sources":["webpack://sitecore/./browser.ts","webpack://sitecore/./library.ts","webpack://sitecore/./se/backgroundgen.ts"],"names":["isPhone","document","addEventListener","imgs","getElementsByClassName","length","img","par","parentNode","tagName","put","createElement","innerHTML","src","replaceChild","className","url","replace","console","log","text","i","style","width","header","navbar","getElementById","insertBefore","nextSibling","toc","removeChild","collapseOnPhone","root","date","Date","time","getSeconds","month","getMonth","day","getDate","xmas","hallow","viskey","visval","xkey","ykey","hkey","wkey","tileWidth","tileHeight","tileWidthNum","tileHeightNum","imagePaths","getRandomBetween","min","max","Math","floor","random","getRandomDecimalBetween","getOrCreateImgPath","folder","folderName","ret","window","location","href","idx","indexOf","levels","substring","split","getImageRoot","getTileWidth","iw","toString","getTileHeight","ih","getArrayIndex","cols","x","y","STARFIELD_SIZE","addImage","elem","ix","iy","svgimg","createElementNS","setAttributeNS","appendChild","isTransparent","modifyImageLocational","rows","cos","sin","getRandomFunctionalBlock","k","f","image","cargo","index","sides","placeRoom","front","back","points","w","h","edge","abs","n","px","entry","push","putConveyorAt","type","startsWith","tryConnectConveyor","p1","p2","corner","setPageBackground","body","html","documentElement","height","scrollHeight","offsetHeight","clientHeight","titleImg","rh","innerHeight","rw","innerWidth","clientWidth","ceil","tw","th","Array","idxl","idxr","idxu","idxd","idxld","idxrd","makeHalls","wrapInArmor","makeConveyors","imgw","imgh","buildImage","tag","container","id","prepend","firstChild"],"mappings":"mHAAO,MAAMA,GAEF,EA0CXC,SAASC,iBAAiB,oBAH1B,YArCA,WACI,GAAIF,EAAS,CAET,IADA,IAAIG,EAAOF,SAASG,uBAAuB,iBACpCD,EAAKE,OAAS,GAAG,CACpB,IAAIC,EAAMH,EAAK,GACXI,EAAMD,EAAIE,WAEd,GAAmB,SAAfD,EAAIE,QAAoB,CACxB,IAAIC,EAAMT,SAASU,cAAc,OACjCD,EAAIE,UAAY,cAAgBN,EAAIO,IAAM,KAAOP,EAAIO,IAAM,OAC3DN,EAAIC,WAAWM,aAAaJ,EAAKH,QAIjC,GAAqB,SAAjBA,EAAIQ,UAAsB,CAC1B,IAAIC,EAAMV,EAAIO,IAAII,QAAQ,SAAU,YACpCV,EAAIK,UAAY,cAAgBI,EAAM,KAAOA,EAAM,WAE7B,gBAAjBT,EAAIQ,UACTR,EAAIK,UAAYN,EAAIO,IAAM,OAE1BN,EAAIK,UAAY,GAExBM,QAAQC,IAAI,iBAAmBb,EAAIO,IAAM,KAG7C,IADA,IAAIO,EAAOnB,SAASG,uBAAuB,YAClCiB,EAAI,EAAGA,EAAID,EAAKf,OAAQgB,IAC7BD,EAAKC,GAAGC,MAAMC,MAAQ,MAE1B,IAAIC,EAASvB,SAASU,cAAc,OACpCa,EAAOZ,UAAY,iYACnB,IAAIa,EAASxB,SAASyB,eAAe,UACrCD,EAAOjB,WAAWmB,aAAaH,EAAQC,EAAOG,aAC9C,IAAIC,EAAM5B,SAASyB,eAAe,iBAClCG,EAAIrB,WAAWsB,YAAYD,IAI/BE,O,2KC1CJ,IAAIC,EAAO,GACJ,MAAMC,EAAO,IAAIC,KACXC,EAAOF,EAAKG,aACZC,EAAQJ,EAAKK,WACbC,EAAMN,EAAKO,UACXC,EAAgB,IAATJ,GAAyB,GAATA,GAAcE,GAAO,GAC5CG,EAAkB,GAATL,GAAcE,GAAO,GAC9BI,EAAS,aACTC,EAAS,UACTC,EAAO,IACPC,EAAO,IACPC,EAAO,SACPC,EAAO,QACpB,IAEIC,EACAC,EAHAC,GAAgB,EAChBC,GAAiB,EAGjBC,EAAa,GAoBV,SAASC,EAAiBC,EAAKC,GAClC,OAAOC,KAAKC,MAAMD,KAAKE,UAAYH,EAAMD,EAAM,GAAKA,GAEjD,SAASK,EAAwBL,EAAKC,GACzC,OAAOC,KAAKE,UAAYH,EAAMD,GAAOA,EAElC,SAASM,EAAmBvD,EAAKwD,GAKpC,OAJuB,MAAnBT,EAAW/C,KACX+C,EAAW/C,GAxBZ,SAAsByD,GACzB,GAAwB,MAApB/B,EAAK+B,SAAoD,IAArB/B,EAAK+B,GAA6B,CAQtE,IAPA,IAAIC,EAAM,UAAYD,EAAa,IAC/B/C,EAAMiD,OAAOC,SAASC,KAEtBC,EAAMpD,EAAIqD,QAAQ,YAGlBC,GAFJtD,EAAMA,EAAIuD,UAAUH,EAAM,IAETI,MAAM,KAAKnE,OAAS,EAC5BgB,EAAI,EAAGA,EAAIiD,EAAQjD,IACxB2C,EAAM,MAAQA,EAClBhC,EAAK+B,GAAcC,EAGvB,OAAOhC,EAAK+B,GAUUU,CAAaX,GAAUxD,EAAM,QAG5C+C,EAAW/C,GAEf,SAASoE,EAAaC,GAKzB,OAJIxB,GAAgBwB,IAChBxB,EAAewB,EACf1B,EAAYE,EAAayB,YAEtB3B,EAEJ,SAAS4B,EAAcC,GAK1B,OAJI1B,GAAiB0B,IACjB1B,EAAgB0B,EAChB5B,EAAaE,EAAcwB,YAExB1B,EAEJ,SAAS6B,EAAcC,EAAMC,EAAGC,GACnC,OAAOD,EAAIC,EAAIF,I,+ECjEnB,MACMG,EAAiB,IAGvB,SAASC,EAASC,EAAM/E,EAAKgF,EAAIC,EAAIZ,EAAIG,GAIrC,IAAIU,EAASvF,SAASwF,gBAAgB,6BAA8B,SACpED,EAAOE,eAAe,KAAM,MAAM,QAAaf,IAC/Ca,EAAOE,eAAe,KAAM,MAAM,QAAcZ,IAChDU,EAAOE,eAAe,+BAAgC,QAAQ,QAAmBpF,EAAK,OACtFkF,EAAOE,eAAe,KAAM,KAAMJ,EAAGV,YACrCY,EAAOE,eAAe,KAAM,KAAMH,EAAGX,YACrCY,EAAOE,eAAe,KAAM,KAAQ,MACpCL,EAAKM,YAAYH,GAkDrB,SAASI,EAActF,GACnB,OAAQA,GACJ,IAAK,MACL,IAAK,UACL,IAAK,SACL,IAAK,SACL,IAAK,gBACL,IAAK,gBACL,IAAK,gBACL,IAAK,gBACL,IAAK,OACL,IAAK,QACD,OAAO,EACX,QACI,OAAO,GAGnB,SAASuF,EAAsBC,EAAMd,EAAMC,EAAGC,EAAGd,EAAK9D,GAWlD,MAVW,SAAPA,IACI,OAEAA,EADQmD,KAAKsC,IAAQ,IAAJd,GAAiC,IAArBxB,KAAKsC,IAAQ,IAAJd,GAAwC,IAArBxB,KAAKuC,IAAQ,IAAJd,GACxD,EAAI,cAAgB,aAE9B,OAEA5E,EADQmD,KAAKsC,IAAQ,IAAJd,GAAiC,IAArBxB,KAAKsC,IAAQ,IAAJd,GAAwC,IAArBxB,KAAKuC,IAAQ,IAAJd,GACxD,EAAI,cAAgB,iBAG/B5E,EAEX,SAAS2F,EAAyB5E,EAAG6E,EAAG9B,GACpC,IAAI+B,EAAoB,IAAhB1C,KAAKE,SAmCb,OAjCIwC,EAAI,IACI,CAAEC,MAAO,UAAWC,OAAO,EAAOpB,EAAG5D,EAAG6D,EAAGgB,EAAGI,MAAOlC,EAAKmC,MAAO,CAAC,IAAK,IAAK,IAAK,MAEpFJ,EAAI,IACD,CAAEC,MAAO,cAAeC,OAAO,EAAMpB,EAAG5D,EAAG6D,EAAGgB,EAAGI,MAAOlC,EAAKmC,MAAO,CAAC,IAAK,IAAK,MAElFJ,EAAI,IACD,CAAEC,MAAO,QAASC,OAAO,EAAOpB,EAAG5D,EAAG6D,EAAGgB,EAAGI,MAAOlC,EAAKmC,MAAO,CAAC,IAAK,IAAK,IAAK,MAElFJ,EAAI,GACD,CAAEC,MAAO,UAAWC,OAAO,EAAOpB,EAAG5D,EAAG6D,EAAGgB,EAAGI,MAAOlC,EAAKmC,MAAO,CAAC,IAAK,IAAK,IAAK,MAEpFJ,EAAI,GACD,CAAEC,MAAO,OAAQC,OAAO,EAAOpB,EAAG5D,EAAG6D,EAAGgB,EAAGI,MAAOlC,EAAKmC,MAAO,CAAC,IAAK,IAAK,IAAK,MAEjFJ,EAAI,IACD,CAAEC,MAAO,UAAWC,OAAO,EAAOpB,EAAG5D,EAAG6D,EAAGgB,EAAGI,MAAOlC,EAAKmC,MAAO,CAAC,IAAK,IAAK,IAAK,MAEpFJ,EAAI,GACD,CAAEC,MAAO,OAAQC,OAAO,EAAOpB,EAAG5D,EAAG6D,EAAGgB,EAAGI,MAAOlC,EAAKmC,MAAO,CAAC,IAAK,IAAK,IAAK,MAEjFJ,EAAI,GACD,CAAEC,MAAO,OAAQC,OAAO,EAAMpB,EAAG5D,EAAG6D,EAAGgB,EAAGI,MAAOlC,EAAKmC,MAAO,CAAC,IAAK,MAEtEJ,EAAI,IACD,CAAEC,MAAO,UAAWC,OAAO,EAAMpB,EAAG5D,EAAG6D,EAAGgB,EAAGI,MAAOlC,EAAKmC,MAAO,CAAC,MAEpEJ,EAAI,IACD,CAAEC,MAAO,WAAYC,OAAO,EAAMpB,EAAG5D,EAAG6D,EAAGgB,EAAGI,MAAOlC,EAAKmC,MAAO,CAAC,IAAK,MAGvE,CAAEH,MAAO,QAASC,OAAO,EAAMpB,EAAG5D,EAAG6D,EAAGgB,EAAGI,MAAOlC,EAAKmC,MAAO,CAAC,IAAK,IAAK,IAAK,MAI9F,SAASC,EAAUvB,EAAGC,EAAGY,EAAMd,EAAMyB,EAAOC,EAAMC,GAG9C,IAFA,IAAIC,GAAI,QAAiB,EAAG,GACxBC,GAAI,QAAiB,EAAG,GACnBX,EAAI,EAAGA,EAAIW,EAAGX,IACnB,IAAK,IAAI7E,GAAKuF,EAAGvF,GAAKuF,EAAGvF,IAAK,CAC1B,IAAI+C,GAAM,QAAcY,EAAMC,EAAI5D,EAAG6D,EAAIgB,GACrCY,EAAQrD,KAAKsD,IAAI1F,IAAMuF,GAAU,GAALV,GAAUA,GAAKW,EAAI,EACnDJ,EAAMrC,GAAO0C,EAAO,eAAiB,QACrCJ,EAAKtC,GAAO,eAGpB,IAAI4C,GAAI,QAAiB,EAAO,EAAJJ,EAAQ,GACpC,IAASvF,EAAI,EAAGA,EAAI2F,EAAG3F,IAAK,CACxB,IAAI4F,GAAK,QAAiBhC,EAAI2B,EAAG3B,EAAI2B,GAErC,GAAkB,SAAdH,EADArC,GAAM,QAAcY,EAAMiC,EAAI/B,EAAI2B,EAAI,KACC,gBAAdJ,EAAMrC,IAAwC,OAAdqC,EAAMrC,GAAnE,CAEA,IAAI8C,EAAQjB,EAAyBgB,EAAI/B,EAAI2B,EAAI,EAAGzC,GACpDqC,EAAMrC,GAAO8C,EAAMd,MACD,eAAdK,EAAMrC,KACNqC,GAAM,QAAczB,EAAMiC,EAAI/B,EAAI2B,EAAI,IAAM,eAE9B,WAAdJ,EAAMrC,KACNqC,GAAM,QAAczB,EAAMiC,EAAI/B,EAAI2B,EAAI,IAAM,WAE9B,YAAdJ,EAAMrC,KACNqC,GAAM,QAAczB,EAAMiC,EAAI/B,EAAI2B,EAAI,IAAM,WAC5CJ,GAAM,QAAczB,EAAMiC,EAAK,EAAG/B,EAAI2B,EAAI,IAAM,WAChDJ,GAAM,QAAczB,EAAMiC,EAAK,EAAG/B,EAAI2B,EAAI,IAAM,YAEhDK,EAAMb,OACNM,EAAOQ,KAAKD,KAGxB,SAASE,EAActB,EAAMd,EAAMyB,EAAOC,EAAMtC,EAAKiD,GAChC,SAAbX,EAAKtC,IAAgC,gBAAbsC,EAAKtC,IAAuC,OAAbsC,EAAKtC,IAA8B,SAAbsC,EAAKtC,MACjE,SAAbsC,EAAKtC,IAAiC,SAAdqC,EAAMrC,IAAmBqC,EAAMrC,GAAKkD,WAAW,WACvED,EAAO,SACXZ,EAAMrC,GAAqB,SAAbsC,EAAKtC,GAAmB,QAAUiD,GAGxD,SAASE,EAAmBzB,EAAMd,EAAMyB,EAAOC,EAAMc,EAAIC,GAErD,IAAK,IAAIpG,EAAIoC,KAAKF,IAAIiE,EAAGvC,EAAGwC,EAAGxC,GAAK,EAAG5D,EAAIoC,KAAKD,IAAIgE,EAAGvC,EAAGwC,EAAGxC,GAAI5D,IAC7D+F,EAActB,EAAMd,EAAMyB,EAAOC,GAAM,QAAc1B,EAAM3D,EAAGmG,EAAGtC,GAAI,UAEzE,IAAS7D,EAAIoC,KAAKF,IAAIiE,EAAGtC,EAAGuC,EAAGvC,GAAK,EAAG7D,EAAIoC,KAAKD,IAAIgE,EAAGtC,EAAGuC,EAAGvC,GAAI7D,IAC7D+F,EAActB,EAAMd,EAAMyB,EAAOC,GAAM,QAAc1B,EAAMyC,EAAGxC,EAAG5D,GAAI,UAEzE,IAAIqG,EAGIA,EAFJD,EAAGvC,EAAIsC,EAAGtC,EACNuC,EAAGxC,EAAIuC,EAAGvC,EACD,gBAGA,gBAITwC,EAAGxC,EAAIuC,EAAGvC,EACD,gBAGA,gBAGjBmC,EAActB,EAAMd,EAAMyB,EAAOC,GAAM,QAAc1B,EAAMyC,EAAGxC,EAAGuC,EAAGtC,GAAIwC,GAuG7D,SAASC,IACpB,GAAI,IACA,OACJ,IAMIC,EAAO3H,SAAS2H,KAChBC,EAAO5H,SAAS6H,gBAChBC,EAAStE,KAAKD,IAAIoE,EAAKI,aAAcJ,EAAKK,aAAcJ,EAAKK,aAAcL,EAAKG,aAAcH,EAAKI,cAAgB,GACnHE,EAAWlI,SAASG,uBAAuB,eAAe,GAC9C,MAAZ+H,GAAoC,MAAhBA,EAAStH,KAA+B,IAAhBsH,EAAStH,KAAasH,EAAStH,KAAOoD,OAAOC,SAASC,KAClG4D,GAAU,GAGVA,GAAU,GAGd,IAAIK,EAAK3E,KAAKD,IAAIuE,EAAQ9D,OAAOoE,YAAapI,SAAS2H,KAAKM,cACxDI,EAAK7E,KAAKD,IAAIS,OAAOsE,WAAYtI,SAAS2H,KAAKY,aAE/C1C,EAAOrC,KAAKgF,KAAKL,EAlBb,IAmBJpD,EAAOvB,KAAKgF,KAAKH,EApBb,IAqBJI,EArBI,GAqBC1D,EACL2D,EArBI,GAqBC7C,EACT5E,QAAQC,IAAI,8BAAgC6D,EAAO,gBAAkBc,EAAO,SAC5E,IACIT,EAAOpF,SAASwF,gBADR,6BAC+B,OAC3CJ,EAAKK,eAAe,KAAM,QAASgD,EAAG9D,YACtCS,EAAKK,eAAe,KAAM,SAAUiD,EAAG/D,YACvC,IAAK,IAAIvD,EAAI,EAAGA,EAAIiH,EAAIjH,GAAK8D,EACzB,IAAK,IAAIe,EAAI,EAAGA,EAAIkC,EAAIlC,GAAKf,EACzBC,EAASC,EAAM,YAAahE,EAAG6E,EAAGf,EAAgBA,GAG1D,IAAIuB,EAAO,IAAIkC,MAAM5D,EAAOc,GACxBW,EAAQ,IAAImC,MAAM5D,EAAOc,GAC7B,IAASI,EAAI,EAAGA,EAAIJ,EAAMI,IACtB,IAAS7E,EAAI,EAAGA,EAAI2D,EAAM3D,IAAK,CAC3B,IAAI+C,GAAM,QAAcY,EAAM3D,EAAG6E,GACjCQ,EAAKtC,GAAO,MACZqC,EAAMrC,GAAO,MAGrB,IAAIuC,EAAS,GACb,IAAST,EAAI,EAAGA,EAAW,IAAPJ,EAAaI,IAC7BM,GAAU,QAAiB,EAAGxB,EAAO,IAAI,QAAiB,EAAGc,EAAO,GAAIA,EAAMd,EAAMyB,EAAOC,EAAMC,IApFzG,SAAmBb,EAAMd,EAAMyB,EAAOC,GAClC,IAAK,IAAIR,EAAI,EAAGA,EAAIJ,EAAMI,IACtB,IAAK,IAAI7E,EAAI,EAAGA,EAAI2D,EAAM3D,IAAK,CAC3B,IAAI+C,GAAM,QAAcY,EAAM3D,EAAG6E,GACjC,GAAkB,gBAAdO,EAAMrC,GAAwB,CAC9B,IAAIyE,GAAO,QAAc7D,EAAM3D,EAAI,EAAG6E,GAClC4C,GAAO,QAAc9D,EAAM3D,EAAI,EAAG6E,GAClC6C,GAAO,QAAc/D,EAAM3D,EAAG6E,EAAI,GAClC8C,GAAO,QAAchE,EAAM3D,EAAG6E,EAAI,GACtC,GAAmB,gBAAfO,EAAMsC,IAA0C,gBAAftC,EAAMuC,IAA0C,SAAfvC,EAAMoC,IAAkC,SAAdnC,EAAKoC,GAAkB,CACnH,IAAIG,GAAQ,QAAcjE,EAAM3D,EAAI,EAAG6E,EAAI,GACvCgD,GAAQ,QAAclE,EAAM3D,EAAI,EAAG6E,EAAI,GACvB,gBAAhBO,EAAMwC,IAA4C,gBAAhBxC,EAAMyC,KACxCzC,EAAMrC,GAAO,YAyEjC+E,CAAUrD,EAAMd,EAAMyB,EAAOC,GAlEjC,SAAqBZ,EAAMd,EAAMyB,EAAOC,GACpC,IAAK,IAAIR,EAAI,EAAGA,EAAIJ,EAAMI,IACtB,IAAK,IAAI7E,EAAI,EAAGA,EAAI2D,EAAM3D,IAAK,CAC3B,IAAI+C,GAAM,QAAcY,EAAM3D,EAAG6E,GACjC,GAAiB,OAAbQ,EAAKtC,GAAe,CACpB,IAAIyE,GAAO,QAAc7D,EAAM3D,EAAI,EAAG6E,GAClC4C,GAAO,QAAc9D,EAAM3D,EAAI,EAAG6E,GAClC6C,GAAO,QAAc/D,EAAM3D,EAAG6E,EAAI,GAClC8C,GAAO,QAAchE,EAAM3D,EAAG6E,EAAI,GACpB,gBAAdQ,EAAKqC,IAAyC,gBAAdrC,EAAKsC,IAAyC,gBAAdtC,EAAKmC,IAAyC,gBAAdnC,EAAKoC,KACrGpC,EAAKtC,GAAO,WAyD5BgF,CAAYtD,EAAMd,EAAMyB,EAAOC,GAxJnC,SAAuBZ,EAAMd,EAAMyB,EAAOC,EAAMC,GAC5C,IAAK,IAAIT,EAAI,EAAGA,EAAIJ,EAAMI,IACtB,IAAK,IAAI7E,EAAI,EAAGA,EAAI2D,EAAM3D,IAClBoC,KAAKE,SAAW,IAEC,gBAAb+C,EADAtC,GAAM,QAAcY,EAAM3D,EAAG6E,KACgB,SAAdO,EAAMrC,IAElB,gBAAfqC,GADO,QAAczB,EAAM3D,EAAG6E,EAAI,MAElCQ,EAAKtC,GAAO,SAQhC,GAAIuC,EAAOtG,QAAU,EACjB,IAASgB,EAAI,EAAGA,EAAIoC,KAAKD,IAAI,EAAGmD,EAAOtG,OAAS,GAAIgB,IAGhDkG,EAAmBzB,EAAMd,EAAMyB,EAAOC,EAF7BC,GAAO,QAAiB,EAAGA,EAAOtG,OAAS,IAC3CsG,GAAO,QAAiB,EAAGA,EAAOtG,OAAS,KAO5D,IAAS6F,EAAI,EAAGA,EAAIJ,EAAMI,IACtB,IAAS7E,EAAI,EAAGA,EAAI2D,EAAM3D,IAAK,CAC3B,IAAI+C,EAiBiB,eAAdqC,EAjBHrC,GAAM,QAAcY,EAAM3D,EAAG6E,IAkB7BO,GAAM,QAAczB,EAAM3D,EAAG6E,EAAI,IAAM,cAEpB,eAAdO,EAAMrC,KACXqC,GAAM,QAAczB,EAAM3D,EAAG6E,EAAI,IAAM,eAEzB,WAAdO,EAAMrC,GACNqC,GAAM,QAAczB,EAAM3D,EAAG6E,EAAI,IAAM,UAEpB,WAAdO,EAAMrC,KACXqC,GAAM,QAAczB,EAAM3D,EAAG6E,EAAI,IAAM,WAEzB,YAAdO,EAAMrC,KACNqC,GAAM,QAAczB,EAAM3D,EAAG6E,EAAI,IAAM,WACvCO,GAAM,QAAczB,EAAM3D,EAAI,EAAG6E,EAAI,IAAM,WAC3CO,GAAM,QAAczB,EAAM3D,EAAI,EAAG6E,IAAM,aA6FnDmD,CAAcvD,EAAMd,EAAMyB,EAAOC,EAAMC,GAjV3C,SAAoBtB,EAAMS,EAAMd,EAAMyB,EAAOC,EAAM4C,EAAMC,GACrD,IAeQ/D,EAbJP,EAAI,EACJC,EAAI,EACJ,QACIM,EAASvF,SAASwF,gBAAgB,6BAA8B,UAC7DC,eAAe,KAAM,KAAM,OAClCF,EAAOE,eAAe,KAAM,KAAM,OAClCF,EAAOE,eAAe,+BAAgC,QAAQ,QAAmB,OAAQ,OACzFF,EAAOE,eAAe,KAAM,MAAM,QAAiB,GAAI4D,EAAO,KAAK1E,YACnEY,EAAOE,eAAe,KAAM,MAAM,QAAiB,GAAI4D,EAAO,KAAK1E,YACnEY,EAAOE,eAAe,KAAM,KAAQ,MACpCL,EAAKM,YAAYH,IAEjB,QACIA,EAASvF,SAASwF,gBAAgB,6BAA8B,UAC7DC,eAAe,KAAM,KAAM,OAClCF,EAAOE,eAAe,KAAM,KAAM,OAClCF,EAAOE,eAAe,+BAAgC,QAAQ,QAAmB,SAAU,OAC3FF,EAAOE,eAAe,KAAM,MAAM,QAAiB,GAAI4D,EAAO,KAAK1E,YACnEY,EAAOE,eAAe,KAAM,MAAM,QAAiB,GAAI4D,EAAO,KAAK1E,YACnEY,EAAOE,eAAe,KAAM,KAAQ,MACpCL,EAAKM,YAAYH,IAErB,IAAK,IAAIU,EAAI,EAAGA,EAAIJ,EAAMI,IAAK,CAC3BjB,EAAI,EACJ,IAAK,IAAI5D,EAAI,EAAGA,EAAI2D,EAAM3D,IAAK,CAC3B,IAAI+C,GAAM,QAAcY,EAAM3D,EAAG6E,GAC7B5F,EAAMmG,EAAMrC,GACZwB,EAActF,IAAqB,OAAboG,EAAKtC,IAE3BgB,EAASC,EADEQ,EAAsBC,EAAMd,EAAM3D,EAAG6E,EAAG9B,EAAKsC,EAAKtC,IACxCa,EAAGC,EA/B5B,GACA,IAgCW,OAAP5E,IAEiB,OAAboG,EAAKtC,IACLgB,EAASC,EAAM,QAASJ,EAAGC,EApCnC,GACA,IAoCe,SAAP5E,GAEA8E,EAASC,EADT/E,EAAMuF,EAAsBC,EAAMd,EAAM3D,EAAG6E,EAAG9B,EAAK9D,GAC/B2E,EAAGC,EAvC/B,GACA,KAyCAD,GA1CA,GA4CJC,GA3CI,IAgVRsE,CAAWnE,EAAMS,EAAMd,EAAMyB,EAAOC,EAAM4B,GAC1C,IAAImB,EAAM,qBACNC,EAAYzJ,SAASyB,eAAe+H,GAOxC,IANiB,MAAbC,IACAA,EAAYzJ,SAASU,cAAc,OACnC+I,EAAUC,GAAKF,EACfvI,QAAQC,IAAI,iCACZlB,SAAS2H,KAAKgC,QAAQF,IAEnBA,EAAUG,YACbH,EAAU5H,YAAY4H,EAAUG,YAGpCH,EAAU/D,YAAYN","file":"984.bundle.js","sourcesContent":["export const isPhone = checkMobile();\r\nfunction checkMobile() {\r\n    return false;\r\n}\r\nfunction collapseOnPhone() {\r\n    if (isPhone) {\r\n        var imgs = document.getElementsByClassName(\"deembed-media\");\r\n        while (imgs.length > 0) {\r\n            let img = imgs[0];\r\n            let par = img.parentNode;\r\n            //console.log(img.src+\" @ \"+par.tagName);\r\n            if (par.tagName == \"VIDEO\") {\r\n                let put = document.createElement(\"div\");\r\n                put.innerHTML = '<a href = \"' + img.src + '\">' + img.src + \"</a>\";\r\n                par.parentNode.replaceChild(put, par);\r\n            }\r\n            else {\r\n                //par.replaceChild(put, img);\r\n                if (par.className == \"video\") {\r\n                    var url = img.src.replace(\"embed/\", \"watch?v=\");\r\n                    par.innerHTML = '<a href = \"' + url + '\">' + url + \"</a>\";\r\n                }\r\n                else if (par.className != \"header-image\")\r\n                    par.innerHTML = img.src + \"<br>\";\r\n                else\r\n                    par.innerHTML = \"\";\r\n            }\r\n            console.log(\"Hiding media '\" + img.src + \"'\");\r\n        }\r\n        var text = document.getElementsByClassName(\"textarea\");\r\n        for (var i = 0; i < text.length; i++) {\r\n            text[i].style.width = \"33%\";\r\n        }\r\n        let header = document.createElement(\"div\");\r\n        header.innerHTML = \"<div style = 'text-align: center; width: 33%; margin: auto; border: 3px solid red;'><h2 style = 'color: red; margin: 12px;'>This site is not designed for use on phones and other handheld devices, nor is any of its content relevant on such platforms. You may continue to browse it this way if you wish, but it is recommended that you visit the site with a proper computer.</h2></div>\";\r\n        let navbar = document.getElementById(\"navbar\");\r\n        navbar.parentNode.insertBefore(header, navbar.nextSibling);\r\n        let toc = document.getElementById(\"toc_container\");\r\n        toc.parentNode.removeChild(toc);\r\n    }\r\n}\r\nfunction interceptDOM() {\r\n    collapseOnPhone();\r\n}\r\ndocument.addEventListener(\"DOMContentLoaded\", interceptDOM);\r\n","let root = {};\r\nexport const date = new Date(); //new Date(\"December 16, 2016 11:13:00\");//\r\nexport const time = date.getSeconds();\r\nexport const month = date.getMonth();\r\nexport const day = date.getDate();\r\nexport const xmas = month == 11 || (month == 0 && day <= 10); //between dec 1 and jan 10\r\nexport const hallow = month == 9 && day >= 10; //between oct 10 and oct 31\t\r\nexport const viskey = 'visibility';\r\nexport const visval = 'visible';\r\nexport const xkey = 'x';\r\nexport const ykey = 'y';\r\nexport const hkey = 'height';\r\nexport const wkey = 'width';\r\nlet tileWidthNum = -1;\r\nlet tileHeightNum = -1;\r\nlet tileWidth;\r\nlet tileHeight;\r\nlet imagePaths = {};\r\nexport function absDiff(a, b) {\r\n    return Math.abs(Math.abs(a) - Math.abs(b));\r\n}\r\nexport function getImageRoot(folderName) {\r\n    if (root[folderName] == null || typeof (root[folderName]) == \"undefined\") {\r\n        var ret = \"images/\" + folderName + \"/\";\r\n        var url = window.location.href;\r\n        //console.log(url);\r\n        var idx = url.indexOf(\"sitecore\");\r\n        url = url.substring(idx + 9);\r\n        //console.log(url);\r\n        var levels = url.split(\"/\").length - 1;\r\n        for (var i = 0; i < levels; i++)\r\n            ret = \"../\" + ret;\r\n        root[folderName] = ret;\r\n        //console.log(\"Calculated root \"+root[folderName]);\r\n    }\r\n    return root[folderName];\r\n}\r\nexport function getRandomBetween(min, max) {\r\n    return Math.floor(Math.random() * (max - min + 1) + min);\r\n}\r\nexport function getRandomDecimalBetween(min, max) {\r\n    return Math.random() * (max - min) + min;\r\n}\r\nexport function getOrCreateImgPath(img, folder) {\r\n    if (imagePaths[img] == null) {\r\n        imagePaths[img] = getImageRoot(folder) + img + \".png\";\r\n        //console.log(\"Computed image path '\"+imagePaths[img]+\"' for image '\"+img+\"'\");\r\n    }\r\n    return imagePaths[img];\r\n}\r\nexport function getTileWidth(iw) {\r\n    if (tileWidthNum != iw) {\r\n        tileWidthNum = iw;\r\n        tileWidth = tileWidthNum.toString();\r\n    }\r\n    return tileWidth;\r\n}\r\nexport function getTileHeight(ih) {\r\n    if (tileHeightNum != ih) {\r\n        tileHeightNum = ih;\r\n        tileHeight = tileHeightNum.toString();\r\n    }\r\n    return tileHeight;\r\n}\r\nexport function getArrayIndex(cols, x, y) {\r\n    return x + y * cols;\r\n}\r\n","const SCALE = 1;\r\nconst STARFIELD_SIZE = 2000;\r\nimport { xmas, hallow, viskey, visval, xkey, ykey, hkey, wkey, getRandomBetween, getOrCreateImgPath, getTileWidth, getTileHeight, getArrayIndex } from '../library';\r\nimport { isPhone } from '../browser';\r\nfunction addImage(elem, img, ix, iy, iw, ih) {\r\n    //var pre = '<image x=\"'+ix+'\" y=\"'+iy+'\" width=\"'+iw+'\" height=\"'+ih+'\" xlink:href=\"'+getImageRoot();\r\n    //var post = '.png\" />';\r\n    //return pre+img+post;\r\n    var svgimg = document.createElementNS('http://www.w3.org/2000/svg', 'image');\r\n    svgimg.setAttributeNS(null, wkey, getTileWidth(iw));\r\n    svgimg.setAttributeNS(null, hkey, getTileHeight(ih));\r\n    svgimg.setAttributeNS('http://www.w3.org/1999/xlink', 'href', getOrCreateImgPath(img, \"se\"));\r\n    svgimg.setAttributeNS(null, xkey, ix.toString());\r\n    svgimg.setAttributeNS(null, ykey, iy.toString());\r\n    svgimg.setAttributeNS(null, viskey, visval);\r\n    elem.appendChild(svgimg);\r\n}\r\nfunction buildImage(elem, rows, cols, front, back, imgw, imgh) {\r\n    var w = 64 * SCALE;\r\n    var h = 64 * SCALE;\r\n    var x = 0;\r\n    var y = 0;\r\n    if (xmas) {\r\n        var svgimg = document.createElementNS('http://www.w3.org/2000/svg', 'image');\r\n        svgimg.setAttributeNS(null, wkey, \"320\");\r\n        svgimg.setAttributeNS(null, hkey, \"320\");\r\n        svgimg.setAttributeNS('http://www.w3.org/1999/xlink', 'href', getOrCreateImgPath(\"xmas\", \"se\"));\r\n        svgimg.setAttributeNS(null, xkey, getRandomBetween(32, imgw - 350).toString());\r\n        svgimg.setAttributeNS(null, ykey, getRandomBetween(32, imgw - 350).toString());\r\n        svgimg.setAttributeNS(null, viskey, visval);\r\n        elem.appendChild(svgimg);\r\n    }\r\n    if (hallow) {\r\n        var svgimg = document.createElementNS('http://www.w3.org/2000/svg', 'image');\r\n        svgimg.setAttributeNS(null, wkey, \"320\");\r\n        svgimg.setAttributeNS(null, hkey, \"320\");\r\n        svgimg.setAttributeNS('http://www.w3.org/1999/xlink', 'href', getOrCreateImgPath(\"hallow\", \"se\"));\r\n        svgimg.setAttributeNS(null, xkey, getRandomBetween(32, imgw - 350).toString());\r\n        svgimg.setAttributeNS(null, ykey, getRandomBetween(32, imgw - 350).toString());\r\n        svgimg.setAttributeNS(null, viskey, visval);\r\n        elem.appendChild(svgimg);\r\n    }\r\n    for (var k = 0; k < rows; k++) {\r\n        x = 0;\r\n        for (var i = 0; i < cols; i++) {\r\n            var idx = getArrayIndex(cols, i, k);\r\n            var img = front[idx];\r\n            if (isTransparent(img) && back[idx] != \"sky\") {\r\n                var bimg = modifyImageLocational(rows, cols, i, k, idx, back[idx]);\r\n                addImage(elem, bimg, x, y, w, h);\r\n            }\r\n            if (img != \"air\") {\r\n                //console.log(\"Got \"+img+\" @ \"+i+\", \"+k);\r\n                if (back[idx] != \"sky\")\r\n                    addImage(elem, \"inner\", x, y, w, h);\r\n                if (img != \"inner\") {\r\n                    img = modifyImageLocational(rows, cols, i, k, idx, img);\r\n                    addImage(elem, img, x, y, w, h);\r\n                }\r\n            }\r\n            x += w;\r\n        }\r\n        y += h;\r\n    }\r\n}\r\nfunction isTransparent(img) {\r\n    switch (img) {\r\n        case \"air\":\r\n        case \"gravgen\":\r\n        case \"conv_v\":\r\n        case \"conv_h\":\r\n        case \"convcorner-dl\":\r\n        case \"convcorner-ul\":\r\n        case \"convcorner-dr\":\r\n        case \"convcorner-ur\":\r\n        case \"prog\":\r\n        case \"inner\":\r\n            return true;\r\n        default:\r\n            return false;\r\n    }\r\n}\r\nfunction modifyImageLocational(rows, cols, x, y, idx, img) {\r\n    if (img == \"armor\") {\r\n        if (xmas) {\r\n            var v = Math.cos(x * 0.25) + Math.cos(x * 0.75) * 0.43 - Math.sin(y * 0.47) * 0.72;\r\n            img = v > 0 ? \"armor_green\" : \"armor_red\";\r\n        }\r\n        if (hallow) {\r\n            var v = Math.cos(x * 0.25) + Math.cos(x * 0.75) * 0.43 - Math.sin(y * 0.47) * 0.72;\r\n            img = v > 0 ? \"armor_black\" : \"armor_orange\";\r\n        }\r\n    }\r\n    return img;\r\n}\r\nfunction getRandomFunctionalBlock(i, k, idx) {\r\n    var f = Math.random() * 1.5;\r\n    var entry = null;\r\n    if (f < 0.05) {\r\n        entry = { image: \"gravgen\", cargo: false, x: i, y: k, index: idx, sides: [\"l\", \"r\", \"u\", \"d\"] };\r\n    }\r\n    else if (f < 0.15) {\r\n        entry = { image: \"assembler_b\", cargo: true, x: i, y: k, index: idx, sides: [\"l\", \"r\", \"d\"] };\r\n    }\r\n    else if (f < 0.25) {\r\n        entry = { image: \"timer\", cargo: false, x: i, y: k, index: idx, sides: [\"l\", \"r\", \"u\", \"d\"] };\r\n    }\r\n    else if (f < 0.4) {\r\n        entry = { image: \"battery\", cargo: false, x: i, y: k, index: idx, sides: [\"l\", \"r\", \"u\", \"d\"] };\r\n    }\r\n    else if (f < 0.5) {\r\n        entry = { image: \"prog\", cargo: false, x: i, y: k, index: idx, sides: [\"l\", \"r\", \"u\", \"d\"] };\r\n    }\r\n    else if (f < 0.75) {\r\n        entry = { image: \"catwalk\", cargo: false, x: i, y: k, index: idx, sides: [\"l\", \"r\", \"u\", \"d\"] };\r\n    }\r\n    else if (f < 0.8) {\r\n        entry = { image: \"door\", cargo: false, x: i, y: k, index: idx, sides: [\"l\", \"r\", \"u\", \"d\"] };\r\n    }\r\n    else if (f < 0.9) {\r\n        entry = { image: \"cent\", cargo: true, x: i, y: k, index: idx, sides: [\"u\", \"d\"] };\r\n    }\r\n    else if (f < 1.1) {\r\n        entry = { image: \"blast_b\", cargo: true, x: i, y: k, index: idx, sides: [\"d\"] };\r\n    }\r\n    else if (f < 1.3) {\r\n        entry = { image: \"stone_br\", cargo: true, x: i, y: k, index: idx, sides: [\"d\", \"r\"] };\r\n    }\r\n    else {\r\n        entry = { image: \"cargo\", cargo: true, x: i, y: k, index: idx, sides: [\"l\", \"r\", \"u\", \"d\"] };\r\n    }\r\n    return entry;\r\n}\r\nfunction placeRoom(x, y, rows, cols, front, back, points) {\r\n    var w = getRandomBetween(2, 4);\r\n    var h = getRandomBetween(4, 5);\r\n    for (var k = 0; k < h; k++) {\r\n        for (var i = -w; i <= w; i++) {\r\n            var idx = getArrayIndex(cols, x + i, y + k);\r\n            var edge = (Math.abs(i) == w || k == 0 || k == h - 1); // && (k != h-2 || back[idx] != \"interiorwall\");\r\n            front[idx] = edge ? \"interiorwall\" : \"inner\";\r\n            back[idx] = \"interiorwall\";\r\n        }\r\n    }\r\n    var n = getRandomBetween(2, w * 2 - 1);\r\n    for (var i = 0; i < n; i++) {\r\n        var px = getRandomBetween(x - w, x + w);\r\n        var idx = getArrayIndex(cols, px, y + h - 2);\r\n        if (front[idx] != \"inner\" && front[idx] != \"interiorwall\" && front[idx] != \"air\")\r\n            continue;\r\n        var entry = getRandomFunctionalBlock(px, y + h - 2, idx);\r\n        front[idx] = entry.image;\r\n        if (front[idx] == \"assembler_b\") {\r\n            front[getArrayIndex(cols, px, y + h - 3)] = \"assembler_t\";\r\n        }\r\n        if (front[idx] == \"blast_b\") {\r\n            front[getArrayIndex(cols, px, y + h - 3)] = \"blast_t\";\r\n        }\r\n        if (front[idx] == \"stone_br\") {\r\n            front[getArrayIndex(cols, px, y + h - 3)] = \"stone_tr\";\r\n            front[getArrayIndex(cols, px - 1, y + h - 3)] = \"stone_tl\";\r\n            front[getArrayIndex(cols, px - 1, y + h - 2)] = \"stone_bl\";\r\n        }\r\n        if (entry.cargo)\r\n            points.push(entry);\r\n    }\r\n}\r\nfunction putConveyorAt(rows, cols, front, back, idx, type) {\r\n    if (back[idx] == \"armor\" || back[idx] == \"interiorwall\" || back[idx] == \"sky\" || back[idx] == \"cargo\") {\r\n        if (back[idx] == \"cargo\" || front[idx] == \"cargo\" || front[idx].startsWith(\"conv\"))\r\n            type = \"cargo\";\r\n        front[idx] = (back[idx] == \"armor\") ? \"cargo\" : type;\r\n    }\r\n}\r\nfunction tryConnectConveyor(rows, cols, front, back, p1, p2) {\r\n    //console.log(\"Connecting \"+p1.x+\",\"+p1.y+\" -> \"+p2.x+\",\"+p2.y);\r\n    for (var i = Math.min(p1.x, p2.x) + 1; i < Math.max(p1.x, p2.x); i++) {\r\n        putConveyorAt(rows, cols, front, back, getArrayIndex(cols, i, p1.y), \"conv_h\");\r\n    }\r\n    for (var i = Math.min(p1.y, p2.y) + 1; i < Math.max(p1.y, p2.y); i++) {\r\n        putConveyorAt(rows, cols, front, back, getArrayIndex(cols, p2.x, i), \"conv_v\");\r\n    }\r\n    var corner = \"convcorner\";\r\n    if (p2.y < p1.y) {\r\n        if (p2.x < p1.x) {\r\n            corner = \"convcorner-ur\";\r\n        }\r\n        else {\r\n            corner = \"convcorner-ul\";\r\n        }\r\n    }\r\n    else {\r\n        if (p2.x < p1.x) {\r\n            corner = \"convcorner-dr\";\r\n        }\r\n        else {\r\n            corner = \"convcorner-dl\";\r\n        }\r\n    }\r\n    putConveyorAt(rows, cols, front, back, getArrayIndex(cols, p2.x, p1.y), corner);\r\n}\r\nfunction makeConveyors(rows, cols, front, back, points) {\r\n    for (var k = 0; k < rows; k++) {\r\n        for (var i = 0; i < cols; i++) {\r\n            if (Math.random() < 0.2) {\r\n                var idx = getArrayIndex(cols, i, k);\r\n                if (back[idx] == \"interiorwall\" && front[idx] == \"inner\") {\r\n                    var idxd = getArrayIndex(cols, i, k + 1);\r\n                    if (front[idxd] == \"interiorwall\") {\r\n                        back[idx] = \"cargo\";\r\n                        //var entry = {x:i, y:k, index:getArrayIndex(cols, i, k), sides:[\"l\", \"r\", \"u\", \"d\"]};\r\n                        //points.push(entry);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (points.length >= 2) {\r\n        for (var i = 0; i < Math.max(1, points.length / 3); i++) {\r\n            var p1 = points[getRandomBetween(0, points.length - 1)];\r\n            var p2 = points[getRandomBetween(0, points.length - 1)];\r\n            tryConnectConveyor(rows, cols, front, back, p1, p2);\r\n        }\r\n    }\r\n    //for (var i = 0; k < points.length; i++) {\r\n    //\tvar entry = points[i];\r\n    //}\r\n    for (var k = 0; k < rows; k++) {\r\n        for (var i = 0; i < cols; i++) {\r\n            var idx = getArrayIndex(cols, i, k);\r\n            /*\r\n                    if (front[idx] == \"conv_h\" || front[idx] == \"conv_v\" || front[idx].startsWith(\"convcorner\")) {\r\n                        var c = 0;\r\n                        if (front[getArrayIndex(cols, i+1, k)] == \"conv_h\" || front[getArrayIndex(cols, i+1, k)] == \"assembler_b\")\r\n                            c++;\r\n                        if (front[getArrayIndex(cols, i-1, k)] == \"conv_h\" || front[getArrayIndex(cols, i-1, k)] == \"assembler_b\")\r\n                            c++;\r\n                        if (front[getArrayIndex(cols, i, k-1)] == \"conv_v\" || front[getArrayIndex(cols, i, k-1)] == \"assembler_b\")\r\n                            c++;\r\n                        if (front[getArrayIndex(cols, i, k+1)] == \"conv_v\" || front[getArrayIndex(cols, i, k+1)] == \"assembler_t\")\r\n                            c++;\r\n                        if (c >= 3) {\r\n                            front[idx] = \"cargo\";\r\n                        }\r\n                    }\r\n                    else\r\n            */ if (front[idx] == \"assembler_b\") {\r\n                front[getArrayIndex(cols, i, k - 1)] = \"assembler_t\";\r\n            }\r\n            else if (front[idx] == \"assembler_t\") {\r\n                front[getArrayIndex(cols, i, k + 1)] = \"assembler_b\";\r\n            }\r\n            if (front[idx] == \"blast_b\") {\r\n                front[getArrayIndex(cols, i, k - 1)] = \"blast_t\";\r\n            }\r\n            else if (front[idx] == \"blast_t\") {\r\n                front[getArrayIndex(cols, i, k + 1)] = \"blast_b\";\r\n            }\r\n            if (front[idx] == \"stone_br\") {\r\n                front[getArrayIndex(cols, i, k - 1)] = \"stone_tr\";\r\n                front[getArrayIndex(cols, i - 1, k - 1)] = \"stone_tl\";\r\n                front[getArrayIndex(cols, i - 1, k)] = \"stone_bl\";\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction makeHalls(rows, cols, front, back) {\r\n    for (var k = 0; k < rows; k++) {\r\n        for (var i = 0; i < cols; i++) {\r\n            var idx = getArrayIndex(cols, i, k);\r\n            if (front[idx] == \"interiorwall\") {\r\n                var idxl = getArrayIndex(cols, i - 1, k);\r\n                var idxr = getArrayIndex(cols, i + 1, k);\r\n                var idxu = getArrayIndex(cols, i, k - 1);\r\n                var idxd = getArrayIndex(cols, i, k + 1);\r\n                if (front[idxu] == \"interiorwall\" && front[idxd] == \"interiorwall\" && front[idxl] == \"inner\" && back[idxr] == \"inner\") {\r\n                    var idxld = getArrayIndex(cols, i - 1, k + 1);\r\n                    var idxrd = getArrayIndex(cols, i + 1, k + 1);\r\n                    if (front[idxld] == \"interiorwall\" && front[idxrd] == \"interiorwall\") {\r\n                        front[idx] = \"inner\";\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction wrapInArmor(rows, cols, front, back) {\r\n    for (var k = 0; k < rows; k++) {\r\n        for (var i = 0; i < cols; i++) {\r\n            var idx = getArrayIndex(cols, i, k);\r\n            if (back[idx] == \"sky\") {\r\n                var idxl = getArrayIndex(cols, i - 1, k);\r\n                var idxr = getArrayIndex(cols, i + 1, k);\r\n                var idxu = getArrayIndex(cols, i, k - 1);\r\n                var idxd = getArrayIndex(cols, i, k + 1);\r\n                if (back[idxu] == \"interiorwall\" || back[idxd] == \"interiorwall\" || back[idxl] == \"interiorwall\" || back[idxr] == \"interiorwall\") {\r\n                    back[idx] = \"armor\";\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nexport default function setPageBackground() {\r\n    if (isPhone)\r\n        return;\r\n    let tail = '</svg>';\r\n    let w = 64 * SCALE;\r\n    let h = 64 * SCALE;\r\n    let x = 0;\r\n    let y = 0;\r\n    //var height = findHighestNode(0, document.documentElement.childNodes);\r\n    let body = document.body;\r\n    let html = document.documentElement;\r\n    let height = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight) - 64;\r\n    let titleImg = document.getElementsByClassName(\"title-image\")[0];\r\n    if (titleImg == null || titleImg.src == null || titleImg.src == \"\" || titleImg.src == window.location.href) {\r\n        height += 72;\r\n    }\r\n    else {\r\n        height += 48;\r\n    }\r\n    //console.log(\"Total height is \"+height+\", document content is: \"+document.documentElement.innerHTML);\r\n    let rh = Math.max(height, window.innerHeight, document.body.clientHeight);\r\n    let rw = Math.max(window.innerWidth, document.body.clientWidth);\r\n    //console.log(rw+\" x \"+rh);\r\n    let rows = Math.ceil(rh / h);\r\n    let cols = Math.ceil(rw / w);\r\n    let tw = cols * w;\r\n    let th = rows * h;\r\n    console.log(\"Generating SE tileset with \" + cols + \" columns and \" + rows + \" rows\");\r\n    let xmlns = \"http://www.w3.org/2000/svg\";\r\n    let elem = document.createElementNS(xmlns, \"svg\");\r\n    elem.setAttributeNS(null, \"width\", tw.toString());\r\n    elem.setAttributeNS(null, \"height\", th.toString());\r\n    for (var i = 0; i < rw; i += STARFIELD_SIZE) {\r\n        for (var k = 0; k < rh; k += STARFIELD_SIZE) {\r\n            addImage(elem, \"starfield\", i, k, STARFIELD_SIZE, STARFIELD_SIZE);\r\n        }\r\n    }\r\n    let back = new Array(cols * rows);\r\n    let front = new Array(cols * rows);\r\n    for (var k = 0; k < rows; k++) {\r\n        for (var i = 0; i < cols; i++) {\r\n            var idx = getArrayIndex(cols, i, k);\r\n            back[idx] = \"sky\";\r\n            front[idx] = \"air\";\r\n        }\r\n    }\r\n    let points = [];\r\n    for (var k = 0; k < rows * 0.75; k++) {\r\n        placeRoom(getRandomBetween(4, cols - 4), getRandomBetween(2, rows - 2), rows, cols, front, back, points);\r\n    }\r\n    makeHalls(rows, cols, front, back);\r\n    wrapInArmor(rows, cols, front, back);\r\n    makeConveyors(rows, cols, front, back, points);\r\n    buildImage(elem, rows, cols, front, back, rw, rh);\r\n    let tag = \"background-content\";\r\n    let container = document.getElementById(tag);\r\n    if (container == null) {\r\n        container = document.createElement(\"div\");\r\n        container.id = tag;\r\n        console.log(\"Injecting background element.\");\r\n        document.body.prepend(container);\r\n    }\r\n    while (container.firstChild) {\r\n        container.removeChild(container.firstChild);\r\n    }\r\n    //console.log(elem);\r\n    container.appendChild(elem);\r\n}\r\n"],"sourceRoot":""}