{"version":3,"sources":["webpack://sitecore/./browser.ts","webpack://sitecore/./library.ts","webpack://sitecore/./stellaris/backgroundgen.ts"],"names":["isPhone","document","addEventListener","imgs","getElementsByClassName","length","img","par","parentNode","tagName","put","createElement","innerHTML","src","replaceChild","className","url","replace","console","log","text","i","style","width","header","navbar","getElementById","insertBefore","nextSibling","toc","removeChild","collapseOnPhone","root","date","Date","time","getSeconds","month","getMonth","day","getDate","xmas","hallow","viskey","visval","xkey","ykey","hkey","wkey","tileWidth","tileHeight","tileWidthNum","tileHeightNum","imagePaths","getRandomBetween","min","max","Math","floor","random","getRandomDecimalBetween","getOrCreateImgPath","folder","folderName","ret","window","location","href","idx","indexOf","levels","substring","split","getImageRoot","getTileWidth","iw","toString","getTileHeight","ih","getArrayIndex","cols","x","y","STARFIELD_SIZE","addImage","elem","ix","iy","star","modifyImageLocational","svgimg","createElementNS","setAttributeNS","appendChild","connectStars","other","connections","includes","push","line","STAR_SIZE","computeControlPoints","K","p1","p2","Array","n","a","b","c","r","m","setPageBackground","body","html","documentElement","height","scrollHeight","offsetHeight","clientHeight","titleImg","rh","innerHeight","rw","innerWidth","clientWidth","k","dd","ceil","rows","stars","dx","dy","posX","posY","f","entry","image","cx","cy","index","alera","meiza","reylana","freyskol","lanka","w","h","region","edges","borderDistance","next","isAleran","angle","atan2","isAleranBorder","sort","points","cpX","map","p","cpY","start","data","l","cp1","cp2","svg","path","drawSpline","generateTerritory","tag","container","id","prepend","firstChild"],"mappings":"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","file":"638.bundle.js","sourcesContent":["export const isPhone = checkMobile();\r\nfunction checkMobile() {\r\n    return false;\r\n}\r\nfunction collapseOnPhone() {\r\n    if (isPhone) {\r\n        var imgs = document.getElementsByClassName(\"deembed-media\");\r\n        while (imgs.length > 0) {\r\n            let img = imgs[0];\r\n            let par = img.parentNode;\r\n            //console.log(img.src+\" @ \"+par.tagName);\r\n            if (par.tagName == \"VIDEO\") {\r\n                let put = document.createElement(\"div\");\r\n                put.innerHTML = '<a href = \"' + img.src + '\">' + img.src + \"</a>\";\r\n                par.parentNode.replaceChild(put, par);\r\n            }\r\n            else {\r\n                //par.replaceChild(put, img);\r\n                if (par.className == \"video\") {\r\n                    var url = img.src.replace(\"embed/\", \"watch?v=\");\r\n                    par.innerHTML = '<a href = \"' + url + '\">' + url + \"</a>\";\r\n                }\r\n                else if (par.className != \"header-image\")\r\n                    par.innerHTML = img.src + \"<br>\";\r\n                else\r\n                    par.innerHTML = \"\";\r\n            }\r\n            console.log(\"Hiding media '\" + img.src + \"'\");\r\n        }\r\n        var text = document.getElementsByClassName(\"textarea\");\r\n        for (var i = 0; i < text.length; i++) {\r\n            text[i].style.width = \"33%\";\r\n        }\r\n        let header = document.createElement(\"div\");\r\n        header.innerHTML = \"<div style = 'text-align: center; width: 33%; margin: auto; border: 3px solid red;'><h2 style = 'color: red; margin: 12px;'>This site is not designed for use on phones and other handheld devices, nor is any of its content relevant on such platforms. You may continue to browse it this way if you wish, but it is recommended that you visit the site with a proper computer.</h2></div>\";\r\n        let navbar = document.getElementById(\"navbar\");\r\n        navbar.parentNode.insertBefore(header, navbar.nextSibling);\r\n        let toc = document.getElementById(\"toc_container\");\r\n        toc.parentNode.removeChild(toc);\r\n    }\r\n}\r\nfunction interceptDOM() {\r\n    collapseOnPhone();\r\n}\r\ndocument.addEventListener(\"DOMContentLoaded\", interceptDOM);\r\n","let root = {};\r\nexport const date = new Date(); //new Date(\"December 16, 2016 11:13:00\");//\r\nexport const time = date.getSeconds();\r\nexport const month = date.getMonth();\r\nexport const day = date.getDate();\r\nexport const xmas = month == 11 || (month == 0 && day <= 10); //between dec 1 and jan 10\r\nexport const hallow = month == 9 && day >= 10; //between oct 10 and oct 31\t\r\nexport const viskey = 'visibility';\r\nexport const visval = 'visible';\r\nexport const xkey = 'x';\r\nexport const ykey = 'y';\r\nexport const hkey = 'height';\r\nexport const wkey = 'width';\r\nlet tileWidthNum = -1;\r\nlet tileHeightNum = -1;\r\nlet tileWidth;\r\nlet tileHeight;\r\nlet imagePaths = {};\r\nexport function absDiff(a, b) {\r\n    return Math.abs(Math.abs(a) - Math.abs(b));\r\n}\r\nexport function getImageRoot(folderName) {\r\n    if (root[folderName] == null || typeof (root[folderName]) == \"undefined\") {\r\n        var ret = \"images/\" + folderName + \"/\";\r\n        var url = window.location.href;\r\n        //console.log(url);\r\n        var idx = url.indexOf(\"sitecore\");\r\n        url = url.substring(idx + 9);\r\n        //console.log(url);\r\n        var levels = url.split(\"/\").length - 1;\r\n        for (var i = 0; i < levels; i++)\r\n            ret = \"../\" + ret;\r\n        root[folderName] = ret;\r\n        //console.log(\"Calculated root \"+root[folderName]);\r\n    }\r\n    return root[folderName];\r\n}\r\nexport function getRandomBetween(min, max) {\r\n    return Math.floor(Math.random() * (max - min + 1) + min);\r\n}\r\nexport function getRandomDecimalBetween(min, max) {\r\n    return Math.random() * (max - min) + min;\r\n}\r\nexport function getOrCreateImgPath(img, folder) {\r\n    if (imagePaths[img] == null) {\r\n        imagePaths[img] = getImageRoot(folder) + img + \".png\";\r\n        //console.log(\"Computed image path '\"+imagePaths[img]+\"' for image '\"+img+\"'\");\r\n    }\r\n    return imagePaths[img];\r\n}\r\nexport function getTileWidth(iw) {\r\n    if (tileWidthNum != iw) {\r\n        tileWidthNum = iw;\r\n        tileWidth = tileWidthNum.toString();\r\n    }\r\n    return tileWidth;\r\n}\r\nexport function getTileHeight(ih) {\r\n    if (tileHeightNum != ih) {\r\n        tileHeightNum = ih;\r\n        tileHeight = tileHeightNum.toString();\r\n    }\r\n    return tileHeight;\r\n}\r\nexport function getArrayIndex(cols, x, y) {\r\n    return x + y * cols;\r\n}\r\n","const STARFIELD_SIZE = 2048;\r\nconst STAR_SIZE = 32;\r\nimport { xmas, viskey, visval, xkey, ykey, hkey, wkey, getRandomBetween, getOrCreateImgPath, getArrayIndex } from '../library';\r\nimport { isPhone } from '../browser';\r\nfunction addImage(elem, img, ix, iy, iw, ih, star) {\r\n    img = modifyImageLocational(ix, iy, img);\r\n    //var pre = '<image x=\"'+ix+'\" y=\"'+iy+'\" width=\"'+iw+'\" height=\"'+ih+'\" xlink:href=\"'+getImageRoot();\r\n    //var post = '.png\" />';\r\n    //return pre+img+post;\r\n    var svgimg = document.createElementNS('http://www.w3.org/2000/svg', 'image');\r\n    svgimg.setAttributeNS(null, wkey, iw.toString());\r\n    svgimg.setAttributeNS(null, hkey, ih.toString());\r\n    svgimg.setAttributeNS('http://www.w3.org/1999/xlink', 'href', getOrCreateImgPath(img, \"stellaris\"));\r\n    svgimg.setAttributeNS(null, xkey, ix.toString());\r\n    svgimg.setAttributeNS(null, ykey, iy.toString());\r\n    svgimg.setAttributeNS(null, viskey, visval);\r\n    if (star)\r\n        svgimg.setAttributeNS(null, \"style\", \"mix-blend-mode: screen;\");\r\n    elem.appendChild(svgimg);\r\n}\r\nfunction modifyImageLocational(x, y, img) {\r\n    return img;\r\n}\r\nfunction connectStars(elem, star, other) {\r\n    if (star.connections.includes(other)) {\r\n        if (!other.connections.includes(star)) {\r\n            other.connections.push(star);\r\n        }\r\n        return;\r\n    }\r\n    var line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n    line.setAttributeNS(null, \"x1\", (star.x + STAR_SIZE / 2).toString());\r\n    line.setAttributeNS(null, \"y1\", (star.y + STAR_SIZE / 2).toString());\r\n    line.setAttributeNS(null, \"x2\", (other.x + STAR_SIZE / 2).toString());\r\n    line.setAttributeNS(null, \"y2\", (other.y + STAR_SIZE / 2).toString());\r\n    line.setAttributeNS(null, \"stroke\", \"rgb(0, 212, 255)\");\r\n    if (xmas) {\r\n        if (Math.random() < 0.5)\r\n            line.setAttributeNS(null, \"stroke\", \"rgb(255, 0, 0)\");\r\n        else\r\n            line.setAttributeNS(null, \"stroke\", \"rgb(0, 192, 0)\");\r\n    }\r\n    line.setAttributeNS(null, \"stroke-width\", \"2\");\r\n    line.setAttributeNS(null, \"style\", \"mix-blend-mode: screen;\");\r\n    elem.appendChild(line);\r\n    star.connections.push(other);\r\n    other.connections.push(star);\r\n}\r\nfunction generateTerritory(elem, w, h, stars, alera) {\r\n    let region = [];\r\n    let edges = [];\r\n    region.push(alera);\r\n    alera.borderDistance = -1;\r\n    var n = getRandomBetween(4, 9);\r\n    for (var i = 0; i < n; i++) {\r\n        //console.log(i+\"/\"+n+\": \");\r\n        let next = [];\r\n        for (var k = 0; k < region.length; k++) {\r\n            let star = region[k];\r\n            if (typeof star.connections !== 'undefined' && star.connections.length > 0) {\r\n                for (var a = 0; a < star.connections.length; a++) {\r\n                    let other = star.connections[a];\r\n                    if (!region.includes(other) && !next.includes(other)) {\r\n                        next.push(other);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        //console.log(next);\r\n        for (var k = 0; k < next.length; k++) {\r\n            region.push(next[k]);\r\n            next[k].borderDistance = i;\r\n            next[k].isAleran = true;\r\n        }\r\n    }\r\n    for (var i = 0; i < region.length; i++) {\r\n        var star = region[i];\r\n        if (typeof star.connections !== 'undefined' && star.connections.length > 0) {\r\n            //console.log(star);\r\n            //console.log(star.connections);\r\n            for (var k = 0; k < star.connections.length; k++) {\r\n                var other = star.connections[k];\r\n                if (!region.includes(other)) {\r\n                    let entry = { x: (star.x + other.x + STAR_SIZE) / 2, y: (star.y + other.y + STAR_SIZE) / 2 };\r\n                    entry.angle = Math.atan2(entry.y - STAR_SIZE / 2 - alera.y, entry.x - STAR_SIZE / 2 - alera.x);\r\n                    edges.push(entry);\r\n                    star.isAleranBorder = true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    edges.sort((a, b) => a.angle - b.angle);\r\n    //console.log(edges);\r\n    //console.log(region);\r\n    var points = edges;\r\n    var cpX = computeControlPoints(points.map(p => p.x));\r\n    var cpY = computeControlPoints(points.map(p => p.y));\r\n    var start = points[0];\r\n    var data = \"M\" + start.x + \" \" + start.y;\r\n    for (var i = 0, l = points.length - 1; i < l; i++) {\r\n        var cp1 = { x: cpX.p1[i], y: cpY.p1[i] };\r\n        var cp2 = { x: cpX.p2[i], y: cpY.p2[i] };\r\n        //drawSpline(elem, points[i], cp1, cp2, points[i + 1])\r\n        //data = data+\" L \"+points[i].x+\" \"+points[i].y;\r\n        data = data + \" C \" + cp1.x + \" \" + cp1.y + \" \" + cp2.x + \" \" + cp2.y + \" \" + points[i + 1].x + \" \" + points[i + 1].y;\r\n    }\r\n    data = data + \" Z\";\r\n    drawSpline(elem, data);\r\n    addImage(elem, \"aleran\", alera.x - 128, alera.y - 128, 256, 256, false);\r\n}\r\n//Credit to https://jsfiddle.net/prafuitu/8m2n5qg6/\r\nfunction computeControlPoints(K) {\r\n    if (K.length == 2) {\r\n        return {\r\n            p1: [K[0]],\r\n            p2: [K[1]]\r\n        };\r\n    }\r\n    let p1 = new Array();\r\n    let p2 = new Array();\r\n    let n = K.length - 1;\r\n    /*rhs vector*/\r\n    let a = new Array();\r\n    let b = new Array();\r\n    let c = new Array();\r\n    let r = new Array();\r\n    /*left most segment*/\r\n    a[0] = 0;\r\n    b[0] = 2;\r\n    c[0] = 1;\r\n    r[0] = K[0] + 2 * K[1];\r\n    /*internal segments*/\r\n    for (var i = 1; i < n - 1; i++) {\r\n        a[i] = 1;\r\n        b[i] = 4;\r\n        c[i] = 1;\r\n        r[i] = 4 * K[i] + 2 * K[i + 1];\r\n    }\r\n    /*right segment*/\r\n    a[n - 1] = 2;\r\n    b[n - 1] = 7;\r\n    c[n - 1] = 0;\r\n    r[n - 1] = 8 * K[n - 1] + K[n];\r\n    /*solves Ax=b with the Thomas algorithm (from Wikipedia)*/\r\n    for (var i = 1; i < n; i++) {\r\n        var m = a[i] / b[i - 1];\r\n        b[i] = b[i] - m * c[i - 1];\r\n        r[i] = r[i] - m * r[i - 1];\r\n    }\r\n    p1[n - 1] = r[n - 1] / b[n - 1];\r\n    for (i = n - 2; i >= 0; --i)\r\n        p1[i] = (r[i] - c[i] * p1[i + 1]) / b[i];\r\n    /*we have p1, now compute p2*/\r\n    for (var i = 0; i < n - 1; i++)\r\n        p2[i] = 2 * K[i + 1] - p1[i + 1];\r\n    p2[n - 1] = 0.5 * (K[n] + p1[n - 1]);\r\n    return { p1: p1, p2: p2 };\r\n}\r\nfunction drawSpline(svg, data) {\r\n    var path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n    path.setAttributeNS(null, 'stroke', \"#785FB6\");\r\n    path.setAttributeNS(null, 'stroke-width', \"5\");\r\n    path.setAttributeNS(null, 'fill', \"#785FB6\");\r\n    path.setAttributeNS(null, 'fill-opacity', \"0.4\");\r\n    path.setAttributeNS(null, 'stroke-opacity', \"0.85\");\r\n    path.setAttributeNS(null, 'd', data);\r\n    svg.appendChild(path);\r\n}\r\nexport default function setPageBackground() {\r\n    if (isPhone)\r\n        return;\r\n    let tail = '</svg>';\r\n    //var height = findHighestNode(0, document.documentElement.childNodes);\r\n    let body = document.body;\r\n    let html = document.documentElement;\r\n    let height = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight) - 64;\r\n    let titleImg = document.getElementsByClassName(\"title-image\")[0];\r\n    if (titleImg == null || titleImg.src == null || titleImg.src == \"\" || titleImg.src == window.location.href) {\r\n        height += 72;\r\n    }\r\n    else {\r\n        height += 48;\r\n    }\r\n    //console.log(\"Total height is \"+height+\", document content is: \"+document.documentElement.innerHTML);\r\n    let rh = Math.max(height, window.innerHeight, document.body.clientHeight);\r\n    let rw = Math.max(window.innerWidth, document.body.clientWidth);\r\n    //console.log(rw+\" x \"+rh);\r\n    console.log(\"Generating stellaris galaxy map background\");\r\n    let xmlns = \"http://www.w3.org/2000/svg\";\r\n    let elem = document.createElementNS(xmlns, \"svg\");\r\n    elem.setAttributeNS(null, \"width\", rw.toString());\r\n    elem.setAttributeNS(null, \"height\", rh.toString());\r\n    for (var i = 0; i < rw; i += STARFIELD_SIZE) {\r\n        for (var k = 0; k < rh; k += STARFIELD_SIZE) {\r\n            addImage(elem, \"starfield\", i, k, STARFIELD_SIZE, STARFIELD_SIZE, false);\r\n        }\r\n    }\r\n    let dStar = STAR_SIZE * 3;\r\n    let dd = STAR_SIZE * 1.35;\r\n    let cols = Math.ceil(rw / dStar);\r\n    let rows = Math.ceil(rh / dStar);\r\n    let stars = new Array(cols * rows);\r\n    for (var i = 0; i < cols; i++) {\r\n        for (var k = 0; k < rows; k++) {\r\n            var dx = (i + 0.5) * dStar;\r\n            var dy = (k + 0.5) * dStar;\r\n            var posX = getRandomBetween(dx - dd, dx + dd);\r\n            var posY = getRandomBetween(dy - dd, dy + dd);\r\n            var img = \"\";\r\n            var f = Math.random();\r\n            if (f < 0.04)\r\n                img = \"hole\";\r\n            else if (f < 0.1)\r\n                img = \"pulsar\";\r\n            else if (f < 0.15)\r\n                img = \"neutron\";\r\n            else\r\n                img = \"star\" + getRandomBetween(0, 7);\r\n            var entry = { image: img, x: posX, y: posY, cx: i, cy: k, index: getArrayIndex(cols, i, k), connections: [] };\r\n            stars[entry.index] = entry;\r\n        }\r\n    }\r\n    let alera = stars[getArrayIndex(cols, getRandomBetween(4, cols - 4), getRandomBetween(4, rows - 4))];\r\n    for (var i = 0; i < stars.length; i++) {\r\n        var star = stars[i];\r\n        if (star.cx > 0 && Math.random() < 0.33) {\r\n            var other = stars[getArrayIndex(cols, star.cx - 1, star.cy)];\r\n            if (other.connections.length < 3)\r\n                connectStars(elem, star, other);\r\n        }\r\n        if (star.cy > 0 && Math.random() < 0.33) {\r\n            var other = stars[getArrayIndex(cols, star.cx, star.cy - 1)];\r\n            if (other.connections.length < 3)\r\n                connectStars(elem, star, other);\r\n        }\r\n    }\r\n    for (var i = 0; i < stars.length; i++) {\r\n        var star = stars[i];\r\n        if (star.connections.length == 0) {\r\n            //console.log(\"unconnected star: \"+star)\r\n        }\r\n        if (star == alera) {\r\n            connectStars(elem, star, stars[getArrayIndex(cols, star.cx - 1, star.cy)]);\r\n            connectStars(elem, star, stars[getArrayIndex(cols, star.cx + 1, star.cy)]);\r\n            connectStars(elem, star, stars[getArrayIndex(cols, star.cx, star.cy - 1)]);\r\n            connectStars(elem, star, stars[getArrayIndex(cols, star.cx, star.cy + 1)]);\r\n            star.meiza = star.connections[getRandomBetween(0, 3)];\r\n            star.reylana = star.meiza;\r\n            while (star.reylana == star.meiza)\r\n                star.reylana = star.connections[getRandomBetween(0, 3)];\r\n            star.freyskol = star.meiza;\r\n            while (star.freyskol == star.meiza || star.freyskol == star.reylana)\r\n                star.freyskol = star.connections[getRandomBetween(0, 3)];\r\n            star.lanka = star.meiza;\r\n            while (star.lanka == star.meiza || star.lanka == star.reylana || star.lanka == star.freyskol)\r\n                star.lanka = star.connections[getRandomBetween(0, 3)];\r\n        }\r\n        if (star.cx > 0) {\r\n            var other = stars[getArrayIndex(cols, star.cx - 1, star.cy)];\r\n            connectStars(elem, star, other);\r\n        }\r\n        else if (star.cy > 0) {\r\n            var other = stars[getArrayIndex(cols, star.cx, star.cy - 1)];\r\n            connectStars(elem, star, other);\r\n        }\r\n        else if (Math.random() < 0.33) {\r\n            var other = stars[getArrayIndex(cols, star.cx + 1, star.cy)];\r\n            connectStars(elem, star, other);\r\n        }\r\n        else {\r\n            var other = stars[getArrayIndex(cols, star.cx, star.cy + 1)];\r\n            connectStars(elem, star, other);\r\n        }\r\n    }\r\n    alera.meiza.image = \"pulsar\";\r\n    alera.reylana.image = \"star1\";\r\n    alera.freyskol.image = \"star6\";\r\n    alera.lanka.image = \"star4\";\r\n    alera.image = \"star0\";\r\n    generateTerritory(elem, rw, rh, stars, alera);\r\n    for (var i = 0; i < stars.length; i++) {\r\n        var star = stars[i];\r\n        addImage(elem, star.image, star.x, star.y, STAR_SIZE, STAR_SIZE, true);\r\n    }\r\n    let tag = \"background-content\";\r\n    let container = document.getElementById(tag);\r\n    if (container == null) {\r\n        container = document.createElement(\"div\");\r\n        container.id = tag;\r\n        console.log(\"Injecting background element.\");\r\n        document.body.prepend(container);\r\n    }\r\n    while (container.firstChild) {\r\n        container.removeChild(container.firstChild);\r\n    }\r\n    //console.log(elem);\r\n    container.appendChild(elem);\r\n}\r\n"],"sourceRoot":""}