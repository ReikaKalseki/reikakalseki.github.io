{"version":3,"sources":["webpack://sitecore/./node_modules/ts-debounce/dist/src/index.esm.js","webpack://sitecore/./browser.ts","webpack://sitecore/./library.ts","webpack://sitecore/./stellaris/backgroundgen.ts"],"names":["r","e","n","i","t","o","a","isImmediate","u","callback","c","maxWait","v","Date","now","l","f","d","slice","call","arguments","this","Promise","clearTimeout","setTimeout","apply","forEach","resolve","push","reject","cancel","isPhone","document","addEventListener","console","log","imgs","getElementsByClassName","length","img","par","parentNode","tagName","put","createElement","innerHTML","src","replaceChild","className","url","replace","text","style","width","header","navbar","getElementById","insertBefore","nextSibling","toc","removeChild","collapseOnPhone","root","date","time","getSeconds","month","getMonth","day","getDate","xmas","hallow","viskey","visval","xkey","ykey","hkey","wkey","tileWidth","tileHeight","tileWidthNum","tileHeightNum","imagePaths","getRandomBetween","min","max","Math","floor","random","getRandomDecimalBetween","getOrCreateImgPath","folder","folderName","ret","window","location","href","idx","indexOf","levels","substring","split","getImageRoot","getTileWidth","iw","toString","getTileHeight","ih","getArrayIndex","cols","x","y","STARFIELD_SIZE","addImage","elem","ix","iy","star","modifyImageLocational","svgimg","createElementNS","setAttributeNS","appendChild","connectStars","other","connections","includes","line","STAR_SIZE","computeControlPoints","K","p1","p2","Array","b","m","setPageBackground","body","html","documentElement","height","scrollHeight","offsetHeight","clientHeight","titleImg","rh","innerHeight","rw","innerWidth","clientWidth","k","dd","ceil","rows","stars","dx","dy","posX","posY","entry","image","cx","cy","index","alera","meiza","reylana","freyskol","lanka","w","h","region","edges","borderDistance","next","isAleran","angle","atan2","isAleranBorder","sort","points","cpX","map","p","cpY","start","data","cp1","cp2","svg","path","drawSpline","generateTerritory","tag","container","id","prepend","firstChild"],"mappings":"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","file":"638.bundle.js","sourcesContent":["function r(r,e,n){var i,t,o;void 0===e&&(e=50),void 0===n&&(n={});var a=null!=(i=n.isImmediate)&&i,u=null!=(t=n.callback)&&t,c=n.maxWait,v=Date.now(),l=[];function f(){if(void 0!==c){var r=Date.now()-v;if(r+e>=c)return c-r}return e}var d=function(){var e=[].slice.call(arguments),n=this;return new Promise(function(i,t){var c=a&&void 0===o;if(void 0!==o&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,v=Date.now(),!a){var i=r.apply(n,e);u&&u(i),l.forEach(function(r){return(0,r.resolve)(i)}),l=[]}},f()),c){var d=r.apply(n,e);return u&&u(d),i(d)}l.push({resolve:i,reject:t})})};return d.cancel=function(r){void 0!==o&&clearTimeout(o),l.forEach(function(e){return(0,e.reject)(r)}),l=[]},d}export{r as debounce};\n//# sourceMappingURL=index.esm.js.map\n","export const isPhone = checkMobile();\r\nfunction checkMobile() {\r\n    return false;\r\n}\r\nfunction collapseOnPhone() {\r\n    if (isPhone) {\r\n        var imgs = document.getElementsByClassName(\"deembed-media\");\r\n        while (imgs.length > 0) {\r\n            let img = imgs[0];\r\n            let par = img.parentNode;\r\n            //console.log(img.src+\" @ \"+par.tagName);\r\n            if (par.tagName == \"VIDEO\") {\r\n                let put = document.createElement(\"div\");\r\n                put.innerHTML = '<a href = \"' + img.src + '\">' + img.src + \"</a>\";\r\n                par.parentNode.replaceChild(put, par);\r\n            }\r\n            else {\r\n                //par.replaceChild(put, img);\r\n                if (par.className == \"video\") {\r\n                    var url = img.src.replace(\"embed/\", \"watch?v=\");\r\n                    par.innerHTML = '<a href = \"' + url + '\">' + url + \"</a>\";\r\n                }\r\n                else if (par.className != \"header-image\")\r\n                    par.innerHTML = img.src + \"<br>\";\r\n                else\r\n                    par.innerHTML = \"\";\r\n            }\r\n            console.log(\"Hiding media '\" + img.src + \"'\");\r\n        }\r\n        var text = document.getElementsByClassName(\"textarea\");\r\n        for (var i = 0; i < text.length; i++) {\r\n            text[i].style.width = \"33%\";\r\n        }\r\n        let header = document.createElement(\"div\");\r\n        header.innerHTML = \"<div style = 'text-align: center; width: 33%; margin: auto; border: 3px solid red;'><h2 style = 'color: red; margin: 12px;'>This site is not designed for use on phones and other handheld devices, nor is any of its content relevant on such platforms. You may continue to browse it this way if you wish, but it is recommended that you visit the site with a proper computer.</h2></div>\";\r\n        let navbar = document.getElementById(\"navbar\");\r\n        navbar.parentNode.insertBefore(header, navbar.nextSibling);\r\n        let toc = document.getElementById(\"toc_container\");\r\n        toc.parentNode.removeChild(toc);\r\n    }\r\n}\r\nfunction interceptDOM() {\r\n    console.log(\"Detected phone browser: \" + isPhone);\r\n    collapseOnPhone();\r\n}\r\ndocument.addEventListener(\"DOMContentLoaded\", interceptDOM);\r\n","let root = {};\r\nexport const date = new Date(); //new Date(\"December 16, 2016 11:13:00\");//\r\nexport const time = date.getSeconds();\r\nexport const month = date.getMonth();\r\nexport const day = date.getDate();\r\nexport const xmas = month == 11 || (month == 0 && day <= 10); //between dec 1 and jan 10\r\nexport const hallow = month == 9 && day >= 10; //between oct 10 and oct 31\t\r\nexport const viskey = 'visibility';\r\nexport const visval = 'visible';\r\nexport const xkey = 'x';\r\nexport const ykey = 'y';\r\nexport const hkey = 'height';\r\nexport const wkey = 'width';\r\nlet tileWidthNum = -1;\r\nlet tileHeightNum = -1;\r\nlet tileWidth;\r\nlet tileHeight;\r\nlet imagePaths = {};\r\nexport function absDiff(a, b) {\r\n    return Math.abs(Math.abs(a) - Math.abs(b));\r\n}\r\nexport function getImageRoot(folderName) {\r\n    if (root[folderName] == null || typeof (root[folderName]) == \"undefined\") {\r\n        var ret = \"images/\" + folderName + \"/\";\r\n        var url = window.location.href;\r\n        //console.log(url);\r\n        var idx = url.indexOf(\"sitecore\");\r\n        url = url.substring(idx + 9);\r\n        //console.log(url);\r\n        var levels = url.split(\"/\").length - 1;\r\n        for (var i = 0; i < levels; i++)\r\n            ret = \"../\" + ret;\r\n        root[folderName] = ret;\r\n        //console.log(\"Calculated root \"+root[folderName]);\r\n    }\r\n    return root[folderName];\r\n}\r\nexport function getRandomBetween(min, max) {\r\n    return Math.floor(Math.random() * (max - min + 1) + min);\r\n}\r\nexport function getRandomDecimalBetween(min, max) {\r\n    return Math.random() * (max - min) + min;\r\n}\r\nexport function getOrCreateImgPath(img, folder) {\r\n    if (imagePaths[img] == null) {\r\n        imagePaths[img] = getImageRoot(folder) + img + \".png\";\r\n        //console.log(\"Computed image path '\"+imagePaths[img]+\"' for image '\"+img+\"'\");\r\n    }\r\n    return imagePaths[img];\r\n}\r\nexport function getTileWidth(iw) {\r\n    if (tileWidthNum != iw) {\r\n        tileWidthNum = iw;\r\n        tileWidth = tileWidthNum.toString();\r\n    }\r\n    return tileWidth;\r\n}\r\nexport function getTileHeight(ih) {\r\n    if (tileHeightNum != ih) {\r\n        tileHeightNum = ih;\r\n        tileHeight = tileHeightNum.toString();\r\n    }\r\n    return tileHeight;\r\n}\r\nexport function getArrayIndex(cols, x, y) {\r\n    return x + y * cols;\r\n}\r\n","const STARFIELD_SIZE = 2048;\r\nconst STAR_SIZE = 32;\r\nimport { debounce } from \"ts-debounce\";\r\nimport { xmas, viskey, visval, xkey, ykey, hkey, wkey, getRandomBetween, getOrCreateImgPath, getArrayIndex } from '../library';\r\nimport { isPhone } from '../browser';\r\nfunction addImage(elem, img, ix, iy, iw, ih, star) {\r\n    img = modifyImageLocational(ix, iy, img);\r\n    //var pre = '<image x=\"'+ix+'\" y=\"'+iy+'\" width=\"'+iw+'\" height=\"'+ih+'\" xlink:href=\"'+getImageRoot();\r\n    //var post = '.png\" />';\r\n    //return pre+img+post;\r\n    var svgimg = document.createElementNS('http://www.w3.org/2000/svg', 'image');\r\n    svgimg.setAttributeNS(null, wkey, iw.toString());\r\n    svgimg.setAttributeNS(null, hkey, ih.toString());\r\n    svgimg.setAttributeNS('http://www.w3.org/1999/xlink', 'href', getOrCreateImgPath(img, \"stellaris\"));\r\n    svgimg.setAttributeNS(null, xkey, ix.toString());\r\n    svgimg.setAttributeNS(null, ykey, iy.toString());\r\n    svgimg.setAttributeNS(null, viskey, visval);\r\n    if (star)\r\n        svgimg.setAttributeNS(null, \"style\", \"mix-blend-mode: screen;\");\r\n    elem.appendChild(svgimg);\r\n}\r\nfunction modifyImageLocational(x, y, img) {\r\n    return img;\r\n}\r\nfunction connectStars(elem, star, other) {\r\n    if (star.connections.includes(other)) {\r\n        if (!other.connections.includes(star)) {\r\n            other.connections.push(star);\r\n        }\r\n        return;\r\n    }\r\n    var line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n    line.setAttributeNS(null, \"x1\", (star.x + STAR_SIZE / 2).toString());\r\n    line.setAttributeNS(null, \"y1\", (star.y + STAR_SIZE / 2).toString());\r\n    line.setAttributeNS(null, \"x2\", (other.x + STAR_SIZE / 2).toString());\r\n    line.setAttributeNS(null, \"y2\", (other.y + STAR_SIZE / 2).toString());\r\n    line.setAttributeNS(null, \"stroke\", \"rgb(0, 212, 255)\");\r\n    if (xmas) {\r\n        if (Math.random() < 0.5)\r\n            line.setAttributeNS(null, \"stroke\", \"rgb(255, 0, 0)\");\r\n        else\r\n            line.setAttributeNS(null, \"stroke\", \"rgb(0, 192, 0)\");\r\n    }\r\n    line.setAttributeNS(null, \"stroke-width\", \"2\");\r\n    line.setAttributeNS(null, \"style\", \"mix-blend-mode: screen;\");\r\n    elem.appendChild(line);\r\n    star.connections.push(other);\r\n    other.connections.push(star);\r\n}\r\nfunction generateTerritory(elem, w, h, stars, alera) {\r\n    let region = [];\r\n    let edges = [];\r\n    region.push(alera);\r\n    alera.borderDistance = -1;\r\n    var n = getRandomBetween(4, 9);\r\n    for (var i = 0; i < n; i++) {\r\n        //console.log(i+\"/\"+n+\": \");\r\n        let next = [];\r\n        for (var k = 0; k < region.length; k++) {\r\n            let star = region[k];\r\n            if (typeof star.connections !== 'undefined' && star.connections.length > 0) {\r\n                for (var a = 0; a < star.connections.length; a++) {\r\n                    let other = star.connections[a];\r\n                    if (!region.includes(other) && !next.includes(other)) {\r\n                        next.push(other);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        //console.log(next);\r\n        for (var k = 0; k < next.length; k++) {\r\n            region.push(next[k]);\r\n            next[k].borderDistance = i;\r\n            next[k].isAleran = true;\r\n        }\r\n    }\r\n    for (var i = 0; i < region.length; i++) {\r\n        var star = region[i];\r\n        if (typeof star.connections !== 'undefined' && star.connections.length > 0) {\r\n            //console.log(star);\r\n            //console.log(star.connections);\r\n            for (var k = 0; k < star.connections.length; k++) {\r\n                var other = star.connections[k];\r\n                if (!region.includes(other)) {\r\n                    let entry = { x: (star.x + other.x + STAR_SIZE) / 2, y: (star.y + other.y + STAR_SIZE) / 2 };\r\n                    entry.angle = Math.atan2(entry.y - STAR_SIZE / 2 - alera.y, entry.x - STAR_SIZE / 2 - alera.x);\r\n                    edges.push(entry);\r\n                    star.isAleranBorder = true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    edges.sort((a, b) => a.angle - b.angle);\r\n    //console.log(edges);\r\n    //console.log(region);\r\n    var points = edges;\r\n    var cpX = computeControlPoints(points.map(p => p.x));\r\n    var cpY = computeControlPoints(points.map(p => p.y));\r\n    var start = points[0];\r\n    var data = \"M\" + start.x + \" \" + start.y;\r\n    for (var i = 0, l = points.length - 1; i < l; i++) {\r\n        var cp1 = { x: cpX.p1[i], y: cpY.p1[i] };\r\n        var cp2 = { x: cpX.p2[i], y: cpY.p2[i] };\r\n        //drawSpline(elem, points[i], cp1, cp2, points[i + 1])\r\n        //data = data+\" L \"+points[i].x+\" \"+points[i].y;\r\n        data = data + \" C \" + cp1.x + \" \" + cp1.y + \" \" + cp2.x + \" \" + cp2.y + \" \" + points[i + 1].x + \" \" + points[i + 1].y;\r\n    }\r\n    data = data + \" Z\";\r\n    drawSpline(elem, data);\r\n    addImage(elem, \"aleran\", alera.x - 128, alera.y - 128, 256, 256, false);\r\n}\r\n//Credit to https://jsfiddle.net/prafuitu/8m2n5qg6/\r\nfunction computeControlPoints(K) {\r\n    if (K.length == 2) {\r\n        return {\r\n            p1: [K[0]],\r\n            p2: [K[1]]\r\n        };\r\n    }\r\n    let p1 = new Array();\r\n    let p2 = new Array();\r\n    let n = K.length - 1;\r\n    /*rhs vector*/\r\n    let a = new Array();\r\n    let b = new Array();\r\n    let c = new Array();\r\n    let r = new Array();\r\n    /*left most segment*/\r\n    a[0] = 0;\r\n    b[0] = 2;\r\n    c[0] = 1;\r\n    r[0] = K[0] + 2 * K[1];\r\n    /*internal segments*/\r\n    for (var i = 1; i < n - 1; i++) {\r\n        a[i] = 1;\r\n        b[i] = 4;\r\n        c[i] = 1;\r\n        r[i] = 4 * K[i] + 2 * K[i + 1];\r\n    }\r\n    /*right segment*/\r\n    a[n - 1] = 2;\r\n    b[n - 1] = 7;\r\n    c[n - 1] = 0;\r\n    r[n - 1] = 8 * K[n - 1] + K[n];\r\n    /*solves Ax=b with the Thomas algorithm (from Wikipedia)*/\r\n    for (var i = 1; i < n; i++) {\r\n        var m = a[i] / b[i - 1];\r\n        b[i] = b[i] - m * c[i - 1];\r\n        r[i] = r[i] - m * r[i - 1];\r\n    }\r\n    p1[n - 1] = r[n - 1] / b[n - 1];\r\n    for (i = n - 2; i >= 0; --i)\r\n        p1[i] = (r[i] - c[i] * p1[i + 1]) / b[i];\r\n    /*we have p1, now compute p2*/\r\n    for (var i = 0; i < n - 1; i++)\r\n        p2[i] = 2 * K[i + 1] - p1[i + 1];\r\n    p2[n - 1] = 0.5 * (K[n] + p1[n - 1]);\r\n    return { p1: p1, p2: p2 };\r\n}\r\nfunction drawSpline(svg, data) {\r\n    var path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n    path.setAttributeNS(null, 'stroke', \"#785FB6\");\r\n    path.setAttributeNS(null, 'stroke-width', \"5\");\r\n    path.setAttributeNS(null, 'fill', \"#785FB6\");\r\n    path.setAttributeNS(null, 'fill-opacity', \"0.4\");\r\n    path.setAttributeNS(null, 'stroke-opacity', \"0.85\");\r\n    path.setAttributeNS(null, 'd', data);\r\n    svg.appendChild(path);\r\n}\r\nexport default function setPageBackground() {\r\n    if (isPhone)\r\n        return;\r\n    let tail = '</svg>';\r\n    //var height = findHighestNode(0, document.documentElement.childNodes);\r\n    let body = document.body;\r\n    let html = document.documentElement;\r\n    let height = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight) - 64;\r\n    let titleImg = document.getElementsByClassName(\"title-image\")[0];\r\n    if (titleImg == null || titleImg.src == null || titleImg.src == \"\" || titleImg.src == window.location.href) {\r\n        height += 72;\r\n    }\r\n    else {\r\n        height += 48;\r\n    }\r\n    //console.log(\"Total height is \"+height+\", document content is: \"+document.documentElement.innerHTML);\r\n    let rh = Math.max(height, window.innerHeight, document.body.clientHeight);\r\n    let rw = Math.max(window.innerWidth, document.body.clientWidth);\r\n    //console.log(rw+\" x \"+rh);\r\n    console.log(\"Generating stellaris galaxy map background\");\r\n    let xmlns = \"http://www.w3.org/2000/svg\";\r\n    let elem = document.createElementNS(xmlns, \"svg\");\r\n    elem.setAttributeNS(null, \"width\", rw.toString());\r\n    elem.setAttributeNS(null, \"height\", rh.toString());\r\n    for (var i = 0; i < rw; i += STARFIELD_SIZE) {\r\n        for (var k = 0; k < rh; k += STARFIELD_SIZE) {\r\n            addImage(elem, \"starfield\", i, k, STARFIELD_SIZE, STARFIELD_SIZE, false);\r\n        }\r\n    }\r\n    let dStar = STAR_SIZE * 3;\r\n    let dd = STAR_SIZE * 1.35;\r\n    let cols = Math.ceil(rw / dStar);\r\n    let rows = Math.ceil(rh / dStar);\r\n    let stars = new Array(cols * rows);\r\n    for (var i = 0; i < cols; i++) {\r\n        for (var k = 0; k < rows; k++) {\r\n            var dx = (i + 0.5) * dStar;\r\n            var dy = (k + 0.5) * dStar;\r\n            var posX = getRandomBetween(dx - dd, dx + dd);\r\n            var posY = getRandomBetween(dy - dd, dy + dd);\r\n            var img = \"\";\r\n            var f = Math.random();\r\n            if (f < 0.04)\r\n                img = \"hole\";\r\n            else if (f < 0.1)\r\n                img = \"pulsar\";\r\n            else if (f < 0.15)\r\n                img = \"neutron\";\r\n            else\r\n                img = \"star\" + getRandomBetween(0, 7);\r\n            var entry = { image: img, x: posX, y: posY, cx: i, cy: k, index: getArrayIndex(cols, i, k), connections: [] };\r\n            stars[entry.index] = entry;\r\n        }\r\n    }\r\n    let alera = stars[getArrayIndex(cols, getRandomBetween(4, cols - 4), getRandomBetween(4, rows - 4))];\r\n    for (var i = 0; i < stars.length; i++) {\r\n        var star = stars[i];\r\n        if (star.cx > 0 && Math.random() < 0.33) {\r\n            var other = stars[getArrayIndex(cols, star.cx - 1, star.cy)];\r\n            if (other.connections.length < 3)\r\n                connectStars(elem, star, other);\r\n        }\r\n        if (star.cy > 0 && Math.random() < 0.33) {\r\n            var other = stars[getArrayIndex(cols, star.cx, star.cy - 1)];\r\n            if (other.connections.length < 3)\r\n                connectStars(elem, star, other);\r\n        }\r\n    }\r\n    for (var i = 0; i < stars.length; i++) {\r\n        var star = stars[i];\r\n        if (star.connections.length == 0) {\r\n            //console.log(\"unconnected star: \"+star)\r\n        }\r\n        if (star == alera) {\r\n            connectStars(elem, star, stars[getArrayIndex(cols, star.cx - 1, star.cy)]);\r\n            connectStars(elem, star, stars[getArrayIndex(cols, star.cx + 1, star.cy)]);\r\n            connectStars(elem, star, stars[getArrayIndex(cols, star.cx, star.cy - 1)]);\r\n            connectStars(elem, star, stars[getArrayIndex(cols, star.cx, star.cy + 1)]);\r\n            star.meiza = star.connections[getRandomBetween(0, 3)];\r\n            star.reylana = star.meiza;\r\n            while (star.reylana == star.meiza)\r\n                star.reylana = star.connections[getRandomBetween(0, 3)];\r\n            star.freyskol = star.meiza;\r\n            while (star.freyskol == star.meiza || star.freyskol == star.reylana)\r\n                star.freyskol = star.connections[getRandomBetween(0, 3)];\r\n            star.lanka = star.meiza;\r\n            while (star.lanka == star.meiza || star.lanka == star.reylana || star.lanka == star.freyskol)\r\n                star.lanka = star.connections[getRandomBetween(0, 3)];\r\n        }\r\n        if (star.cx > 0) {\r\n            var other = stars[getArrayIndex(cols, star.cx - 1, star.cy)];\r\n            connectStars(elem, star, other);\r\n        }\r\n        else if (star.cy > 0) {\r\n            var other = stars[getArrayIndex(cols, star.cx, star.cy - 1)];\r\n            connectStars(elem, star, other);\r\n        }\r\n        else if (Math.random() < 0.33) {\r\n            var other = stars[getArrayIndex(cols, star.cx + 1, star.cy)];\r\n            connectStars(elem, star, other);\r\n        }\r\n        else {\r\n            var other = stars[getArrayIndex(cols, star.cx, star.cy + 1)];\r\n            connectStars(elem, star, other);\r\n        }\r\n    }\r\n    alera.meiza.image = \"pulsar\";\r\n    alera.reylana.image = \"star1\";\r\n    alera.freyskol.image = \"star6\";\r\n    alera.lanka.image = \"star4\";\r\n    alera.image = \"star0\";\r\n    generateTerritory(elem, rw, rh, stars, alera);\r\n    for (var i = 0; i < stars.length; i++) {\r\n        var star = stars[i];\r\n        addImage(elem, star.image, star.x, star.y, STAR_SIZE, STAR_SIZE, true);\r\n    }\r\n    let tag = \"background-content\";\r\n    let container = document.getElementById(tag);\r\n    if (container == null) {\r\n        container = document.createElement(\"div\");\r\n        container.id = tag;\r\n        console.log(\"Injecting background element.\");\r\n        document.body.prepend(container);\r\n    }\r\n    while (container.firstChild) {\r\n        container.removeChild(container.firstChild);\r\n    }\r\n    //console.log(elem);\r\n    container.appendChild(elem);\r\n}\r\nwindow.addEventListener('resize', debounce(setPageBackground, 250, { isImmediate: true }));\r\n"],"sourceRoot":""}