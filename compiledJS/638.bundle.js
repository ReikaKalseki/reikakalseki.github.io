(self.webpackChunksitecore=self.webpackChunksitecore||[]).push([[638],{638:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>c});var r=n(621),l=n(212);const i=2048;function o(t,e,n,l,i,o,s){if(s){let r=document.createElement("div");r.className="tile-stellaris-"+e,r.setAttribute("style","mix-blend-mode: screen;"),r.style.position="relative",r.style.top=l.toString()+"px",r.style.left=n.toString()+"px",r.style.width=i.toString()+"px",r.style.height=o.toString()+"px",t.appendChild(r)}else{e=function(t,e,n){return n}(0,0,e);var a=document.createElementNS("http://www.w3.org/2000/svg","image");a.setAttributeNS(null,r.yJ,i.toString()),a.setAttributeNS(null,r.eT,o.toString()),a.setAttributeNS("http://www.w3.org/1999/xlink","href",(0,r.Fq)(e,"stellaris")),a.setAttributeNS(null,r.HP,n.toString()),a.setAttributeNS(null,r.rR,l.toString()),a.setAttributeNS(null,r.pX,r.yK),t.appendChild(a)}}function s(t,e,n){if(null!=e&&null!=n&&void 0!==e&&void 0!==n)if(e.connections.includes(n))n.connections.includes(e)||n.connections.push(e);else{var l=document.createElementNS("http://www.w3.org/2000/svg","line");l.setAttributeNS(null,"x1",(e.x+16).toString()),l.setAttributeNS(null,"y1",(e.y+16).toString()),l.setAttributeNS(null,"x2",(n.x+16).toString()),l.setAttributeNS(null,"y2",(n.y+16).toString()),l.setAttributeNS(null,"stroke","rgb(0, 212, 255)"),r.hm&&(Math.random()<.5?l.setAttributeNS(null,"stroke","rgb(255, 0, 0)"):l.setAttributeNS(null,"stroke","rgb(0, 192, 0)")),l.setAttributeNS(null,"stroke-width","2"),l.setAttributeNS(null,"style","mix-blend-mode: screen;"),t.appendChild(l),e.connections.push(n),n.connections.push(e)}}function a(t){if(2==t.length)return{p1:[t[0]],p2:[t[1]]};let e=new Array,n=new Array,r=t.length-1,l=new Array,i=new Array,o=new Array,s=new Array;l[0]=0,i[0]=2,o[0]=1,s[0]=t[0]+2*t[1];for(var a=1;a<r-1;a++)l[a]=1,i[a]=4,o[a]=1,s[a]=4*t[a]+2*t[a+1];for(l[r-1]=2,i[r-1]=7,o[r-1]=0,s[r-1]=8*t[r-1]+t[r],a=1;a<r;a++){var c=l[a]/i[a-1];i[a]=i[a]-c*o[a-1],s[a]=s[a]-c*s[a-1]}for(e[r-1]=s[r-1]/i[r-1],a=r-2;a>=0;--a)e[a]=(s[a]-o[a]*e[a+1])/i[a];for(a=0;a<r-1;a++)n[a]=2*t[a+1]-e[a+1];return n[r-1]=.5*(t[r]+e[r-1]),{p1:e,p2:n}}function c(){if(l.M)return;document.body,document.documentElement;var t=document.body.offsetHeight,e=Math.max(window.innerWidth,document.body.clientWidth);console.log("Generating stellaris galaxy map background");let n=document.createElementNS(r.DI,"svg");n.setAttributeNS(null,"width",e.toString()),n.setAttributeNS(null,"height",t.toString());for(var c=0;c<e;c+=i)for(var u=0;u<t;u+=i)o(n,"starfield",c,u,i,i,!1);let y=43.2,d=Math.ceil(e/96),g=Math.ceil(t/96),h=new Array(d*g);for(c=0;c<d;c++)for(u=0;u<g;u++){var f=96*(c+.5),m=96*(u+.5),p=(0,r.sc)(f-y,f+y),x=(0,r.sc)(m-y,m+y),b=Math.random(),S={image:b<.04?"hole":b<.1?"pulsar":b<.15?"neutron":"star"+(0,r.sc)(0,7),x:p,y:x,cx:c,cy:u,index:(0,r.Yy)(d,g,c,u),connections:[]};h[S.index]=S}let v=h[(0,r.Yy)(d,g,(0,r.sc)(4,d-4),(0,r.sc)(4,g-4))];for(c=0;c<h.length;c++)(k=h[c]).cx>0&&Math.random()<.33&&(A=h[(0,r.Yy)(d,g,k.cx-1,k.cy)]).connections.length<3&&s(n,k,A),k.cy>0&&Math.random()<.33&&(A=h[(0,r.Yy)(d,g,k.cx,k.cy-1)]).connections.length<3&&s(n,k,A);for(c=0;c<h.length;c++){if((k=h[c]).connections.length,k==v){for(s(n,k,h[(0,r.Yy)(d,g,k.cx-1,k.cy)]),s(n,k,h[(0,r.Yy)(d,g,k.cx+1,k.cy)]),s(n,k,h[(0,r.Yy)(d,g,k.cx,k.cy-1)]),s(n,k,h[(0,r.Yy)(d,g,k.cx,k.cy+1)]),k.meiza=k.connections[(0,r.sc)(0,3)],k.reylana=k.meiza;k.reylana==k.meiza;)k.reylana=k.connections[(0,r.sc)(0,3)];for(k.freyskol=k.meiza;k.freyskol==k.meiza||k.freyskol==k.reylana;)k.freyskol=k.connections[(0,r.sc)(0,3)];for(k.lanka=k.meiza;k.lanka==k.meiza||k.lanka==k.reylana||k.lanka==k.freyskol;)k.lanka=k.connections[(0,r.sc)(0,3)]}if(k.cx>0)s(n,k,A=h[(0,r.Yy)(d,g,k.cx-1,k.cy)]);else if(k.cy>0)s(n,k,A=h[(0,r.Yy)(d,g,k.cx,k.cy-1)]);else if(Math.random()<.33)s(n,k,A=h[(0,r.Yy)(d,g,k.cx+1,k.cy)]);else{var A;s(n,k,A=h[(0,r.Yy)(d,g,k.cx,k.cy+1)])}}v.meiza.image="pulsar",v.reylana.image="star1",v.freyskol.image="star6",v.lanka.image="star4",v.image="star0",function(t,e,n,l,i){let s=[],c=[];s.push(i),i.borderDistance=-1;for(var u=(0,r.sc)(4,9),y=0;y<u;y++){let t=[];for(var d=0;d<s.length;d++){let e=s[d];if(void 0!==e.connections&&e.connections.length>0)for(var g=0;g<e.connections.length;g++){let n=e.connections[g];s.includes(n)||t.includes(n)||t.push(n)}}for(d=0;d<t.length;d++)s.push(t[d]),t[d].borderDistance=y,t[d].isAleran=!0}for(y=0;y<s.length;y++){var h=s[y];if(void 0!==h.connections&&h.connections.length>0)for(d=0;d<h.connections.length;d++){var f=h.connections[d];if(!s.includes(f)){let t={x:(h.x+f.x+32)/2,y:(h.y+f.y+32)/2};t.angle=Math.atan2(t.y-16-i.y,t.x-16-i.x),c.push(t),h.isAleranBorder=!0}}}c.sort(((t,e)=>t.angle-e.angle));for(var m=c,p=a(m.map((t=>t.x))),x=a(m.map((t=>t.y))),b=m[0],S="M"+b.x+" "+b.y,v=(y=0,m.length-1);y<v;y++){var A={x:p.p1[y],y:x.p1[y]},w={x:p.p2[y],y:x.p2[y]};S=S+" C "+A.x+" "+A.y+" "+w.x+" "+w.y+" "+m[y+1].x+" "+m[y+1].y}(function(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttributeNS(null,"stroke","#785FB6"),n.setAttributeNS(null,"stroke-width","15"),n.setAttributeNS(null,"fill","#785FB6"),n.setAttributeNS(null,"fill-opacity","0.4"),n.setAttributeNS(null,"stroke-opacity","0.85"),n.setAttributeNS(null,"d",e),t.appendChild(n)})(t,S+=" Z"),o(t,"aleran",i.x-128,i.y-128,256,256,!1)}(n,0,0,0,v);let w="background-content",N=document.getElementById(w);for(null==N&&(N=document.createElement("div"),N.id=w,console.log("Injecting background element."),document.body.prepend(N));N.firstChild;)N.removeChild(N.firstChild);for(N.appendChild(n),n=document.createElement("div"),n.id="bcg-stars",n.style.position="relative",n.style.width="0px",n.style.height="0px",n.classList.add("entity-layer"),c=0;c<h.length;c++){var k;o(n,(k=h[c]).image,k.x,k.y,32,32,!0)}N.appendChild(n)}}}]);
//# sourceMappingURL=638.bundle.js.map