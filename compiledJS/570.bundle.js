(self.webpackChunksitecore=self.webpackChunksitecore||[]).push([[570],{21:(e,t,a)=>{var r;!function(){"use strict";var o=.5*(Math.sqrt(3)-1),n=(3-Math.sqrt(3))/6,l=1/6,h=(Math.sqrt(5)-1)/4,i=(5-Math.sqrt(5))/20;function s(e){var t;t="function"==typeof e?e:e?function(){var e=0,t=0,a=0,r=1,o=u();e=o(" "),t=o(" "),a=o(" ");for(var n=0;n<arguments.length;n++)(e-=o(arguments[n]))<0&&(e+=1),(t-=o(arguments[n]))<0&&(t+=1),(a-=o(arguments[n]))<0&&(a+=1);return o=null,function(){var o=2091639*e+2.3283064365386963e-10*r;return e=t,t=a,a=o-(r=0|o)}}(e):Math.random,this.p=c(t),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var a=0;a<512;a++)this.perm[a]=this.p[255&a],this.permMod12[a]=this.perm[a]%12}function c(e){var t,a=new Uint8Array(256);for(t=0;t<256;t++)a[t]=t;for(t=0;t<255;t++){var r=t+~~(e()*(256-t)),o=a[t];a[t]=a[r],a[r]=o}return a}function u(){var e=4022871197;return function(t){t=t.toString();for(var a=0;a<t.length;a++){var r=.02519603282416938*(e+=t.charCodeAt(a));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}s.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(e,t){var a,r,l=this.permMod12,h=this.perm,i=this.grad3,s=0,c=0,u=0,f=(e+t)*o,d=Math.floor(e+f),m=Math.floor(t+f),v=(d+m)*n,M=e-(d-v),p=t-(m-v);M>p?(a=1,r=0):(a=0,r=1);var g=M-a+n,y=p-r+n,b=M-1+2*n,x=p-1+2*n,w=255&d,k=255&m,Y=.5-M*M-p*p;if(Y>=0){var _=3*l[w+h[k]];s=(Y*=Y)*Y*(i[_]*M+i[_+1]*p)}var A=.5-g*g-y*y;if(A>=0){var C=3*l[w+a+h[k+r]];c=(A*=A)*A*(i[C]*g+i[C+1]*y)}var S=.5-b*b-x*x;if(S>=0){var E=3*l[w+1+h[k+1]];u=(S*=S)*S*(i[E]*b+i[E+1]*x)}return 70*(s+c+u)},noise3D:function(e,t,a){var r,o,n,h,i,s,c,u,f,d,m=this.permMod12,v=this.perm,M=this.grad3,p=.3333333333333333*(e+t+a),g=Math.floor(e+p),y=Math.floor(t+p),b=Math.floor(a+p),x=(g+y+b)*l,w=e-(g-x),k=t-(y-x),Y=a-(b-x);w>=k?k>=Y?(i=1,s=0,c=0,u=1,f=1,d=0):w>=Y?(i=1,s=0,c=0,u=1,f=0,d=1):(i=0,s=0,c=1,u=1,f=0,d=1):k<Y?(i=0,s=0,c=1,u=0,f=1,d=1):w<Y?(i=0,s=1,c=0,u=0,f=1,d=1):(i=0,s=1,c=0,u=1,f=1,d=0);var _=w-i+l,A=k-s+l,C=Y-c+l,S=w-u+2*l,E=k-f+2*l,R=Y-d+2*l,D=w-1+.5,T=k-1+.5,N=Y-1+.5,q=255&g,z=255&y,U=255&b,W=.6-w*w-k*k-Y*Y;if(W<0)r=0;else{var F=3*m[q+v[z+v[U]]];r=(W*=W)*W*(M[F]*w+M[F+1]*k+M[F+2]*Y)}var O=.6-_*_-A*A-C*C;if(O<0)o=0;else{var j=3*m[q+i+v[z+s+v[U+c]]];o=(O*=O)*O*(M[j]*_+M[j+1]*A+M[j+2]*C)}var I=.6-S*S-E*E-R*R;if(I<0)n=0;else{var L=3*m[q+u+v[z+f+v[U+d]]];n=(I*=I)*I*(M[L]*S+M[L+1]*E+M[L+2]*R)}var B=.6-D*D-T*T-N*N;if(B<0)h=0;else{var G=3*m[q+1+v[z+1+v[U+1]]];h=(B*=B)*B*(M[G]*D+M[G+1]*T+M[G+2]*N)}return 32*(r+o+n+h)},noise4D:function(e,t,a,r){var o,n,l,s,c,u,f,d,m,v,M,p,g,y,b,x,w,k=this.perm,Y=this.grad4,_=(e+t+a+r)*h,A=Math.floor(e+_),C=Math.floor(t+_),S=Math.floor(a+_),E=Math.floor(r+_),R=(A+C+S+E)*i,D=e-(A-R),T=t-(C-R),N=a-(S-R),q=r-(E-R),z=0,U=0,W=0,F=0;D>T?z++:U++,D>N?z++:W++,D>q?z++:F++,T>N?U++:W++,T>q?U++:F++,N>q?W++:F++;var O=D-(u=z>=3?1:0)+i,j=T-(f=U>=3?1:0)+i,I=N-(d=W>=3?1:0)+i,L=q-(m=F>=3?1:0)+i,B=D-(v=z>=2?1:0)+2*i,G=T-(M=U>=2?1:0)+2*i,H=N-(p=W>=2?1:0)+2*i,P=q-(g=F>=2?1:0)+2*i,V=D-(y=z>=1?1:0)+3*i,J=T-(b=U>=1?1:0)+3*i,K=N-(x=W>=1?1:0)+3*i,Q=q-(w=F>=1?1:0)+3*i,X=D-1+4*i,Z=T-1+4*i,$=N-1+4*i,ee=q-1+4*i,te=255&A,ae=255&C,re=255&S,oe=255&E,ne=.6-D*D-T*T-N*N-q*q;if(ne<0)o=0;else{var le=k[te+k[ae+k[re+k[oe]]]]%32*4;o=(ne*=ne)*ne*(Y[le]*D+Y[le+1]*T+Y[le+2]*N+Y[le+3]*q)}var he=.6-O*O-j*j-I*I-L*L;if(he<0)n=0;else{var ie=k[te+u+k[ae+f+k[re+d+k[oe+m]]]]%32*4;n=(he*=he)*he*(Y[ie]*O+Y[ie+1]*j+Y[ie+2]*I+Y[ie+3]*L)}var se=.6-B*B-G*G-H*H-P*P;if(se<0)l=0;else{var ce=k[te+v+k[ae+M+k[re+p+k[oe+g]]]]%32*4;l=(se*=se)*se*(Y[ce]*B+Y[ce+1]*G+Y[ce+2]*H+Y[ce+3]*P)}var ue=.6-V*V-J*J-K*K-Q*Q;if(ue<0)s=0;else{var fe=k[te+y+k[ae+b+k[re+x+k[oe+w]]]]%32*4;s=(ue*=ue)*ue*(Y[fe]*V+Y[fe+1]*J+Y[fe+2]*K+Y[fe+3]*Q)}var de=.6-X*X-Z*Z-$*$-ee*ee;if(de<0)c=0;else{var me=k[te+1+k[ae+1+k[re+1+k[oe+1]]]]%32*4;c=(de*=de)*de*(Y[me]*X+Y[me+1]*Z+Y[me+2]*$+Y[me+3]*ee)}return 27*(o+n+l+s+c)}},s._buildPermutationTable=c,void 0===(r=function(){return s}.call(t,a,t,e))||(e.exports=r),t.SimplexNoise=s,e.exports=s}()},570:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var r=a(21),o=a(621),n=a(212);let l=999,h=0;const i=new r,s={diamond:k("diamond"),emerald:k("emerald"),ruby:k("ruby"),sapphire:k("sapphire"),topaz:k("topaz"),sugalite:k("sugalite")};function c(e,t){let a=document.createElement("div");return a.className="tile-fce-"+t,e.appendChild(a),a}function u(e,t,a){"cave"==a&&console.log("ERROR: ADDED CAVE ON NULL"),e[t]=[],e[t].push(a)}function f(e,t,a){null==e[t]||0==e[t].length?u(e,t,a):e[t][0]=a}function d(e,t,a){e[t].push(a)}function m(e,t){var a=e[t];return null==a||0==a.length?null:a[a.length-1]}function v(e,t){var a=e[t];return 0==a.length?null:a[0]}function M(e,t,a,r,o,n){var l=t/a;let h=r[e];var i=o[e],s=(n[e],"rock"),c=l-(h-.1);c>=0&&Math.random()*Math.random()*Math.random()*.8<c&&(s="bedrock");var u=l-(i-.1);return u>=0&&Math.random()*Math.random()*Math.random()*.8<u&&(s="deepstone"),s}function p(e,t,a,r,o,n,l){return l}function g(e,t,a,r,n,l,h,i,s){for(var c=function(e,t,a){var r=t/a,o=r<.2?1:1+.75*(r-.2);switch(e){case"hardresin":return[5,5];case"cave":return[2*o,4*o];case"biomass":return[1*o,1.5*o];case"coal":return[1.5*o,2*o];default:return[1.5*o,3*o]}}(l,n,e),M=.675*(0,o.sT)(c[0],c[1]),p=Math.max(0,Math.floor(r-M)),g=Math.max(0,Math.floor(n-M)),b=Math.min(t-1,Math.floor(r+M)),x=Math.min(e-1,Math.floor(n+M)),w=.75,k=(0,o.sT)(-w,w),Y=(0,o.sT)(-w,w),_="hardresin"==l?0:"cave"==l?3.5*M:2*M,A=0;A<=_;A++)for(var C=p;C<=b;C++)for(var S=g;S<=x;S++){var E=C-r,R=S-n;if(E*E+R*R<=M*M+.25){var D=Math.floor(C+A*k),T=Math.floor(S+A*Y);let e=(0,o.Yy)(t,D,T);if("hardresin"==l)u(a,e,l);else if("cave"==l){if(null!=a[e]&&a[e].length>0){var N=m(a,e);if("cave"!=N&&"lava"!=N&&"crystal"!=N&&"magmarock"!=N&&"hardresin"!=N){var q=0==T?-1:(0,o.Yy)(t,D,T-1);(q<0||null!=a[q]&&a[q].length>0&&"lava"!=m(a,q))&&d(a,e,l)}}}else(null==a[e]||y(l,v(a,e)))&&f(a,e,l)}}}function y(e,t){return"hardresin"==e||("biomass"==e?null!=t&&t.startsWith("deepstone_g"):"deepstone"==t||"bedrock"==t||"rock"==t)}function b(e,t,a,r,o,n){var l=a/e,h=["coal","copper","tin"];return l>r[t]-.12&&h.push("iron"),l>r[t]-.06&&h.push("lithium"),l>r[t]+.05&&(h.push("gold"),h.push("nickel"),h.push("titanium")),Math.abs(l-o[t])<=.1&&h.push("biomass"),l>o[t]+.05&&h.push("chromium"),h[Math.floor(Math.random()*h.length)]}function x(e,t,a,r,o){var n=e/t,l=[];return n<a/2&&l.push("diamond"),n>a/2&&n<a-.04&&l.push("emerald"),n>a+.02&&n<(a+r)/2&&l.push("ruby"),n>(a+r)/2&&n<r-.04&&l.push("sapphire"),Math.abs(n-r)<.05&&l.push("topaz"),n>r+.07&&l.push("sugalite"),0==l.length?null:l[Math.floor(Math.random()*l.length)]}function w(){if(n.M)return;document.body,document.documentElement;var e=document.body.offsetHeight,t=Math.max(window.innerWidth,document.body.clientWidth);let a=Math.ceil(e/32)+1,r=Math.ceil(t/32);console.log("Generating FCE chunk slice tileset with "+r+" columns and "+a+" rows");let f=new Array(r*a),v=new Array(r),y=new Array(r),w=new Array(r);for(var k=0;k<r;k++)v[k]=(0,o.sT)(.22,.28),y[k]=(0,o.sT)(.45,.55),w[k]=(0,o.sT)(.87,.95),k>0&&(v[k]=Math.max(Math.min(v[k],v[k-1]+1),v[k-1]-1),y[k]=Math.max(Math.min(y[k],y[k-1]+2),y[k-1]-2),w[k]=Math.max(Math.min(w[k],w[k-1]+1),w[k-1]-1));for(k=0;k<r;k++)for(var Y=0;Y<a;Y++){let e=M(k,Y,a,v,y,w),t=(0,o.Yy)(r,k,Y);f[t]=null,u(f,t,e)}!function(e,t,a,r,n,i){for(var s=-1,c=-1,f=-1,v=-1,M=-1,p=-1,g=(0,o.sc)(-3,4),y=(0,o.sc)(-3,4),b=Math.max(1,e/100),x=0;x<t;x++){var w=Math.floor(r[x]*e)-(0,o.sc)(1,4)*b,k=Math.floor(r[x]*e)+(0,o.sc)(0,1)*b,Y=Math.floor(n[x]*e)-(0,o.sc)(2,4)*b,_=Math.floor(n[x]*e)+(0,o.sc)(2,4)*b,A=Math.floor(i[x]*e)-(0,o.sc)(2,4)*b,C=Math.floor(i[x]*e)+(0,o.sc)(1,3)*b;x>0&&(w=Math.max(Math.min(w,s+.5),s-.5),k=Math.max(Math.min(k,c+.25),c-.25),Y=Math.max(Math.min(Y,v+1),v-1),_=Math.max(Math.min(_,f+.5),f-.5),A=Math.max(Math.min(A,p+1),p-1),C=Math.max(Math.min(C,M+.25),M-.25)),l=Math.min(l,Math.floor(A)),h=Math.max(h,Math.ceil(C));for(var S=0;S<e;S++){var E=(0,o.Yy)(t,x,S);S>=w&&S<=k&&(u(a,E,"deepstone_b1"),S!=Math.ceil(w)&&S!=Math.floor(k)&&d(a,E,"cave")),S>=Y&&S<=_&&(u(a,E,"deepstone_g1"),S!=Math.ceil(Y)&&S!=Math.floor(_)&&d(a,E,"cave")),S>=A&&S<=C&&(S!=Math.floor(C)&&S>=Math.floor(.95*e)-1*b?u(a,E,"lava"):(u(a,E,"deepstone_o1"),S!=Math.ceil(A)&&S!=Math.floor(C)&&d(a,E,"cave")))}for(var R=Y-k,D=A-_,T=Math.min(6,Math.max(1,Math.floor(Math.min(R,D)/4))),N=Math.min(6,6/T),q=-T;q<0;q++){var z=6==N?3:Math.floor((1-q)*N);z<=6&&(u(a,(0,o.Yy)(t,x,q+Math.ceil(w)),"deepstone_b"+z),u(a,(0,o.Yy)(t,x,-q+Math.floor(k)),"deepstone_b"+z),u(a,(0,o.Yy)(t,x,q+Math.ceil(Y)),"deepstone_g"+z),u(a,(0,o.Yy)(t,x,-q+Math.floor(_)),"deepstone_g"+z),u(a,(0,o.Yy)(t,x,q+Math.ceil(A)),"deepstone_o"+z),u(a,(0,o.Yy)(t,x,-q+Math.floor(C)),"deepstone_o"+z))}c=k,s=w,f=_,v=Y,M=C,p=A;var U=!1;if(g<=-4&&(g=(0,o.sc)(2,4),U=!0),g>0){var W=w+1,F=k-1;for((U||1==g)&&(W=(0,o.sc)(W,W+1),F=Math.max(W,(0,o.sc)(F-3,F))),S=W;S<=F;S++)u(a,E=(0,o.Yy)(t,x,S),"crystal")}if(g--,y<=-4&&(y=(0,o.sc)(1,4)),y>0)for(W=A+1,F=C-1,S=W=(0,o.sc)(W,W+3);S<=F;S++)"cave"==m(a,E=(0,o.Yy)(t,x,S))&&u(a,E,"magmarock");y--}}(a,r,f,v,y,w),function(e,t,a,r,o,n){for(var l=e*t/32,h=0;h<l;h++){var i=Math.floor(Math.random()*t),s=Math.floor(Math.random()*e);g(e,t,a,i,s,b(e,i,s,r,o))}}(a,r,f,v,y),function(e,t,a,r,n,l){for(var h=0;h<e/2.5;h++)g(e,t,a,(0,o.sc)(0,t),(0,o.sc)(0,e),"cave")}(a,r,f),function(e,t,a,r,n,l){for(var h=0;h<e/40;h++){var i=(0,o.sc)(6,t-6);g(e,t,a,i,(0,o.sc)(Math.floor(r[i]*e/2),Math.floor(l[i]*e-12)),"hardresin")}}(a,r,f,v,0,w),function(e,t,a){for(var r=(0,o.sc)(0,4),n=0;n<t;n++){for(var l=Math.max(r-1,Math.min(r+1,(0,o.sc)(0,4))),h=0;h<l;h++)u(a,(0,o.Yy)(t,n,h),"resin");r=l}}(0,r,f),function(e,t,a,r,n,l){for(var h=[],i=0;i<3*e;i++){var s=(0,o.sc)(2,t-2),c=(0,o.sc)(6,e-2),u=x(c,e,r[s],n[s],l[s]);if(null!=u){var f=(0,o.Yy)(t,s,c),v=m(a,f),M=m(a,(0,o.Yy)(t,s,c+1));"cave"!=v||"cave"==M||"lava"==M||null!=M&&M.includes("gem")||(d(a,f,"gem_"+u),h.push({x:64*s,y:64*c,type:u}))}}}(a,r,f,v,y,w);let _="background-content",A=document.getElementById(_);for(null==A&&(A=document.createElement("div"),A.id=_,console.log("Injecting background element."),document.body.prepend(A));A.firstChild;)A.removeChild(A.firstChild);let C=document.createElement("div");A.appendChild(C),C.className="tile-layer",C.style.width=t.toString()+"px",C.style.height=e.toString()+"px",function(e,t,a,r){try{for(let[e,t]of Object.entries(s)){let a=".tile-fce-gem_"+e+"::after",r=512;document.styleSheets[0].addRule(a,"width: "+r+"px;"),document.styleSheets[0].addRule(a,"height: "+r+"px;"),document.styleSheets[0].addRule(a,"min-width: "+r+"px;"),document.styleSheets[0].addRule(a,"min-height: "+r+"px;"),document.styleSheets[0].addRule(a,"top: calc(50% - "+r/2+"px)"),document.styleSheets[0].addRule(a,"left: calc(50% - "+r/2+"px)"),document.styleSheets[0].addRule(a,"background: radial-gradient(rgba("+t.r+","+t.g+","+t.b+",255) 0%, rgba("+t.r+","+t.g+","+t.b+",0) 70%);"),document.styleSheets[0].addRule(a,"mix-blend-mode: color-dodge;")}}catch(e){console.log("Could not access ruleset: "+e)}for(var n=0;n<t;n++){let t=document.createElement("div");for(var u=0;u<a;u++){let e=r[(0,o.Yy)(a,u,n)];if(o.hm&&e.length>0&&"cave"!=e[e.length-1]&&!e[e.length-1].startsWith("gem")&&"lava"!=e[e.length-1]&&(n<l||n>h)){var f=0==n?["cave"]:r[(0,o.Yy)(a,u,n-1)];f.length>0&&"cave"==f[f.length-1]&&e.push("snow")}let s=t;for(var d=0;d<e.length;d++){let t=e[d];if(t=p(0,0,0,0,0,0,t),s=c(s,t),"bedrock"==t){let e=360*i.noise2D(.05*u,.05*n),t=2+i.noise2D(.11*(u-3485),.11*(n-5874));s.style.filter="saturate("+t+") hue-rotate("+e+"deg)"}}}e.appendChild(t)}(0,o.xE)(e,1)}(C,a,r,f)}function k(e){let t=0,a=0,r=0;switch(e){case"diamond":t=224,a=234,r=240;break;case"emerald":t=78,a=221;break;case"ruby":t=229,a=19;break;case"sapphire":t=36,a=87,r=242;break;case"topaz":t=245,a=195,r=67;break;case"sugalite":t=195,a=22,r=229}return{r:t,g:a,b:r}}}}]);
//# sourceMappingURL=570.bundle.js.map