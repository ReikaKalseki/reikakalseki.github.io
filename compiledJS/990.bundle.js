(self.webpackChunksitecore=self.webpackChunksitecore||[]).push([[990],{938:(e,t,r)=>{"use strict";function o(e,t,r){var o,l,a;void 0===t&&(t=50),void 0===r&&(r={});var i=null!=(o=r.isImmediate)&&o,n=null!=(l=r.callback)&&l,s=r.maxWait,c=Date.now(),h=[];function f(){if(void 0!==s){var e=Date.now()-c;if(e+t>=s)return s-e}return t}var d=function(){var t=[].slice.call(arguments),r=this;return new Promise((function(o,l){var s=i&&void 0===a;if(void 0!==a&&clearTimeout(a),a=setTimeout((function(){if(a=void 0,c=Date.now(),!i){var o=e.apply(r,t);n&&n(o),h.forEach((function(e){return(0,e.resolve)(o)})),h=[]}}),f()),s){var d=e.apply(r,t);return n&&n(d),o(d)}h.push({resolve:o,reject:l})}))};return d.cancel=function(e){void 0!==a&&clearTimeout(a),h.forEach((function(t){return(0,t.reject)(e)})),h=[]},d}r.d(t,{D:()=>o})},990:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var o=r(938),l=r(621),a=r(212);const i={red:(0,l.$W)("ff0000"),orange:(0,l.$W)("FF7F00"),yellow:(0,l.$W)("ffD800"),green:(0,l.$W)("00ff00"),cyan:(0,l.$W)("00ffff"),argon:(0,l.$W)("4CCCFF"),blue:(0,l.$W)("0045ff"),purple:(0,l.$W)("A426FF"),magenta:(0,l.$W)("FF00FF"),white:(0,l.$W)("ffffff")},n=["argon","argon","purple","red","yellow","yellow","orange","purple","green","magenta","blue"];function s(e,t,r,o){let l=document.createElement("div");return l.className="tile-factorio-"+t,"air"!=t&&null!=t||(l.style.width=r.toString()+"px",l.style.height=o.toString()+"px"),e.appendChild(l),l}function c(e,t,r,o,l,a,i=1){let n=s(e,t,r,o);return n.style.position="absolute",n.style.left=l.toString()+"px",n.style.top=a.toString()+"px",null!=t&&void 0!==t&&t.startsWith("oil")&&(i*=1.5),n.style.transformOrigin="top left",n.style.transform="scale("+i+")","spawner"==t&&(n.style.transform=n.style.transform+" translate(-16px)"),n}function h(e,t,r,o,a){for(var i=32*a,n=32*a,c=0;c<t;c++){let t=document.createElement("div");for(var h=0;h<r;h++){let e=(0,l.Yy)(r,h,c),a=o[e];a=f(o,0,r,h,c,0,a),s(t,a,i,n)}e.appendChild(t)}(0,l.xE)(e,1)}function f(e,t,r,o,a,i,n){if(null!=n&&void 0!==n&&n.startsWith("belt")&&7==n.length)n=function(e,t,r,o,a,i,n){var s=(0,l.Yy)(r,o-1,a),c=(0,l.Yy)(r,o+1,a),h=(0,l.Yy)(r,o,a-1),f=(0,l.Yy)(r,o,a+1);return e[s]!=e[c]||"belt-left"!=e[s]&&"belt-right"!=e[s]?"belt-dr"!=e[s]&&"belt-ur"!=e[s]||"belt-right"!=e[c]?"belt-dl"!=e[c]&&"belt-ul"!=e[c]||"belt-left"!=e[s]?"belt-dr"!=e[s]&&"belt-ur"!=e[s]&&"belt-right"!=e[s]||"belt-left"!=e[c]&&"belt-dl"!=e[c]&&"belt-ul"!=e[c]?e[h]!=e[f]||"belt-up"!=e[f]&&"belt-down"!=e[f]?"belt-lu"!=e[f]&&"belt-ru"!=e[f]||"belt-up"!=e[h]?"belt-ld"!=e[h]&&"belt-rd"!=e[h]||"belt-down"!=e[f]?"belt-down"!=e[h]&&"belt-rd"!=e[h]&&"belt-ld"!=e[h]||"belt-up"!=e[f]&&"belt-ru"!=e[f]&&"belt-lu"!=e[f]?n:"belt-right"==n||"belt-dr"==n||"belt-ur"==n?"belt-right":"belt-left":"belt-down":"belt-up":e[f]:"belt-down"==n||"belt-ld"==n||"belt-rd"==n?"belt-down":"belt-up":"belt-left":"belt-right":e[s]}(e,0,r,o,a,0,n);else if("blocker"==n)return"air";return n}function d(e,t,r){var o=0,a=0,i=0,n=0,s="";switch((0,l.sc)(0,3)){case 0:o=(0,l.sc)(0,t-1),a=e-1,n=-1,s="up";break;case 1:o=0,a=(0,l.sc)(0,e-1),i=1,s="right";break;case 2:o=(0,l.sc)(0,t-1),a=0,n=1,s="down";break;case 3:o=t-1,a=(0,l.sc)(0,e-1),i=-1,s="left"}for(var c=!0,h=o,f=a,d=0;c;){var m=s,y=s,g=(0,l.Yy)(t,h,f);if("air"!=r[g])break;var p=Math.random(),b=Math.min(.35,.066*d),v=!u(r,t,e,h,f,i,n);if(p<b||v){d=0;var M=-1!=n&&u(r,t,e,h,f,0,1),x=1!=n&&u(r,t,e,h,f,0,-1),w=1!=i&&u(r,t,e,h,f,-1,0),k=-1!=i&&u(r,t,e,h,f,1,0),Y=[];if(M&&Y.push("down"),x&&Y.push("up"),w&&Y.push("left"),k&&Y.push("right"),Y.length>1&&(Y=Y.filter((e=>e!=m))),Y.length>0)switch(Y[Math.floor(Math.random()*Y.length)]){case"left":i=-1,s="left",y=1==n?"dl":"ul",n=0;break;case"right":i=1,s="right",y=1==n?"dr":"ur",n=0;break;case"up":n=-1,s="up",y=1==i?"ru":"lu",i=0;break;case"down":n=1,s="down",y=1==i?"rd":"ld",i=0}else i=0,n=0}else d++;var S=0==i&&0==n;r[g]="belt-"+y,f+=n,c=(h+=i)>=0&&h<t&&f>=0&&f<e&&!S}}function u(e,t,r,o,a,i,n){var s=o+i,c=a+n,h=(0,l.Yy)(t,s,c);return s<0||s>=t||c<0||c>=r||"air"==e[h]||e[h].startsWith("belt")&&Math.random()<.5}function m(e,t,r){for(var o=(0,l.sc)(4,t-4),a=(0,l.sc)(4,e-4),i=[2,5],n=(0,l.sT)(i[0],i[1]),s=(0,l.sT)(i[0],i[1]),c=Math.max(0,Math.floor(o-n)),h=Math.max(0,Math.floor(a-s)),f=Math.min(t-1,Math.floor(o+n)),d=Math.min(e-1,Math.floor(a+s)),u=.75,m=(0,l.sT)(-u,u),y=(0,l.sT)(-u,u),g=c;g<=f;g++)for(var p=h;p<=d;p++){var b=g-o,v=p-a;if(b*b+v*v<=n*s+.5){var M=g+Math.floor(m*v),x=p+Math.floor(y*b);r[(0,l.Yy)(t,M,x)]=l.hm?"ice"+(0,l.sc)(0,15):"dirt"+(0,l.sc)(0,20)}}}function y(){if(a.M)return;let e=document.body,t=document.documentElement;var r=Math.max(e.offsetHeight,t.clientHeight,t.offsetHeight,window.innerHeight,document.body.clientHeight),o=Math.max(window.innerWidth,document.body.clientWidth);let s=Math.ceil(r/32),u=Math.ceil(o/32),y=32*u,g=32*s;console.log("Generating Factorio tileset with "+u+" columns and "+s+" rows");for(var p=new Array(Math.ceil(u*s/4)),b=new Array(u*s),v=new Array(u*s),M=0;M<u;M++)for(var x=0;x<s;x++){let e=(0,l.Yy)(u,M,x),t="air";if(v[e]=t,b[e]=t,M<u/2&&x<s/2){let e=l.hm||Math.random()<.125?15:3;p[(0,l.Yy)(u/2,M,x)]=(l.hm?"snow":"grass")+(0,l.sc)(0,e)}}for(M=0;M<Math.floor(s/6);M++)m(s/2,u/2,p);var w=function(e,t,r){for(var o=[],a=0;a<e*t/200;a++){var i=(0,l.sc)(2,9),n=(0,l.sc)(i+2,t-i-2),s=(0,l.sc)(i+2,e-i-2),c=Math.max(0,Math.floor(n-i)),h=Math.max(0,Math.floor(s-i)),f=Math.min(t-1,Math.floor(n+i)),d=Math.min(e-1,Math.floor(s+i)),u=7,m=Math.random(),y="coal";if(m<.1?y="oil":m<.4?y="copper":m<.7&&(y="iron"),Math.random()<.2&&(y="geothermal_"),"oil"==y||"geothermal_"==y){u="oil"==y?3:5;for(var g=0;g<2*i;g++){var p=(0,l.sc)(c,f),b=(0,l.sc)(h,d);"air"==r[x=(0,l.Yy)(t,p,b)]&&(r[x]=y+(0,l.sc)(0,u),"geothermal_"==y&&(o.push({x:p,y:b}),p>0&&(r[(0,l.Yy)(t,p-1,b)]="blocker"),p<t&&(r[(0,l.Yy)(t,p+1,b)]="blocker"),b>0&&(r[(0,l.Yy)(t,p,b-1)]="blocker"),b<e&&(r[(0,l.Yy)(t,p,b+1)]="blocker")))}}else for(var v=c;v<=f;v++)for(var M=h;M<=d;M++){var x,w=v-n,k=M-s;w*w+k*k<=i*i+.5&&"air"==r[x=(0,l.Yy)(t,v,M)]&&(r[x]=y+(0,l.sc)(0,u))}}return o}(s,u,b);let k=function(e,t,r,o,a,i,n,s){for(var c=[],h=0;h<Math.floor(e/4);h++){for(var f="rock"+(0,l.sc)(1,4),d="rock1"==f?128:64,u=(0,l.sc)(d/2,a-d/2),m=(0,l.sc)(d/2,i-d/2),y=Math.floor(u/n),g=Math.floor(m/s),p=Math.ceil((u+d/2)/n),b=Math.ceil((m+d/2)/s),v=!0,M=y;M<=p&&v;M++)for(var x=g;x<=b&&v;x++)"air"!=o[(0,l.Yy)(t,M,x)]&&(v=!1);if(v){for(M=y;M<=p;M++)for(x=g;x<=b;x++)o[(0,l.Yy)(t,M,x)]="blocker";var w={image:f,x:u,y:m,size:d,scale:.5};c.push(w)}}for(h=0;h<Math.max(5,Math.floor(e/15));h++)for(var k=(0,l.sc)(256,a-256),Y=(0,l.sc)(256,i-256),S=0;S<3;S++){var W="dome";for(d=128,u=(0,l.sc)(k-d,k+d),m=(0,l.sc)(Y-d,Y+d),y=Math.floor(u/n),g=Math.floor(m/s),p=Math.ceil((u+d/2)/n),b=Math.ceil((m+d/2)/s),v=!0,M=y;M<=p&&v;M++)for(x=g;x<=b&&v;x++)"air"!=o[(0,l.Yy)(t,M,x)]&&(v=!1);if(v){for(M=y;M<=p;M++)for(x=g;x<=b;x++)o[(0,l.Yy)(t,M,x)]="blocker";w={image:W,x:u,y:m,size:d,scale:.5},c.push(w)}}for(h=0;h<Math.floor(e/16);h++){for(d=192,u=(0,l.sc)(d/2,a-d/2),m=(0,l.sc)(d/2,i-d/2),y=Math.floor(u/n),g=Math.floor(m/s),p=Math.ceil((u+d/2)/n),b=Math.ceil((m+d/2)/s),v=!0,M=y;M<=p&&v;M++)for(x=g;x<=b&&v;x++)"air"!=o[(0,l.Yy)(t,M,x)]&&(v=!1);if(v){for(M=y;M<=p;M++)for(x=g;x<=b;x++)o[(0,l.Yy)(t,M,x)]="blocker";for(w={image:"spawner",x:u,y:m,size:d,scale:.75},c.push(w),S=0;S<3;S++){var C=(0,l.sc)(0,360)*Math.PI/180,E=(0,l.sT)(d/3,d);for(u=w.x+d/2+Math.cos(C)*E,m=w.y+d/2+Math.sin(C)*E,y=Math.floor(u/n),g=Math.floor(m/s),p=Math.ceil((u+d/2)/n),b=Math.ceil((m+d/2)/s),v=!0,M=y;M<=p&&v;M++)for(x=g;x<=b&&v;x++)"air"!=o[(0,l.Yy)(t,M,x)]&&(v=!1);if(v){for(M=y;M<=p;M++)for(x=g;x<=b;x++)o[(0,l.Yy)(t,M,x)]="blocker";c.push({image:"worm",x:u,y:m,size:96,scale:.75})}}for(S=0;S<9;S++){C=(0,l.sc)(0,360)*Math.PI/180,E=(0,l.sT)(d/3,d),u=w.x+d/2+Math.cos(C)*E,m=w.y+d/2+Math.sin(C)*E;var z="biter"+(0,l.sc)(1,4);Math.random()<.1&&(z="fly"),c.push({image:z,x:u,y:m,size:64,scale:1})}}}for(h=0;h<Math.floor(e*t/12);h++){d=128,u=(0,l.sc)(d/2,a-d/2),m=(0,l.sc)(d/2,i-d/2);var F=Math.floor((u+d/2)/n),$=Math.floor((m+d/2)/s);if(v="air"==o[(0,l.Yy)(t,F,$)]){var T=(0,l.Yy)(Math.floor(t/2),Math.floor(F/2),Math.floor($/2)),D=r[T].startsWith("dirt")||r[T].startsWith("ice");if(D&&l.hm)continue;w={image:"tree"+(0,l.sc)(D?1:3,D?2:5),x:u,y:m,size:d,scale:1},l.hm&&(w.image="snowtree"+(0,l.sc)(1,3),w.scale*=1.5),c.push(w)}}return c}(s,u,p,v,y,g,32,32);for(M=0;M<Math.floor(s/1.5);M++)d(s,u,v);let Y="background-content",S=document.getElementById(Y);for(null==S&&(S=document.createElement("div"),S.id=Y,console.log("Injecting background element."),document.body.prepend(S));S.firstChild;)S.removeChild(S.firstChild);let W=document.createElement("div"),C=document.createElement("div"),E=document.createElement("div"),z=document.createElement("div"),F=document.createElement("div"),$=document.createElement("div");S.appendChild(W),S.appendChild(C),S.appendChild(E),S.appendChild(z),(0,l.w7)()&&S.appendChild($),S.appendChild(F),W.style.width=o.toString()+"px",W.style.height=r.toString()+"px",C.style.width=o.toString()+"px",C.style.height=r.toString()+"px",C.style.position="absolute",E.style.width=o.toString()+"px",E.style.height=r.toString()+"px",z.style.width=o.toString()+"px",z.style.height=r.toString()+"px",z.style.position="absolute",F.style.width=o.toString()+"px",F.style.height=r.toString()+"px",F.style.position="absolute",F.style.setProperty("mix-blend-mode","screen"),W.className="tile-layer",E.className="tile-layer",h(W,s/2,u/2,p,2),function(e,t,r,o,a,i=1,n=0,s=0){for(var h=0,d=0,u=0;u<t;u++){h=0;for(var m=0;m<r;m++){let t=o[(0,l.Yy)(r,m,u)];if(t=f(o,0,r,m,u,0,t),"air"!=t){let r=h;n>0&&(r+=(Math.random()-.5)*n*2);let o=d;s>0&&(o+=(Math.random()-.5)*s*2),c(e,t,a,a,r,o,i)}h+=a}d+=a}(0,l.xE)(e,1)}(C,s,u,b,32,.75,4,4),h(E,s,u,v,1),S.style.width=o.toString()+"px",S.style.height=r.toString()+"px";try{for(let[e,t]of Object.entries(i)){let r=".tile-factorio-glowcolor_"+e+"::after",o=512,l=0;document.styleSheets[0].addRule(r,"width: "+o+"px;"),document.styleSheets[0].addRule(r,"height: "+o+"px;"),document.styleSheets[0].addRule(r,"top: "+l+"px;"),document.styleSheets[0].addRule(r,"left: "+l+"px;"),document.styleSheets[0].addRule(r,"background: radial-gradient(rgba("+t.r+","+t.g+","+t.b+",255) 0%, rgba("+t.r+","+t.g+","+t.b+",0) 70%);"),document.styleSheets[0].addRule(r,"mix-blend-mode: screen;")}}catch(e){console.log("Could not access ruleset: "+e)}let T=[],D=[];for(M=0;M<k.length;M++){var R=k[M].x-16,_=k[M].y-16,H=1*k[M].size;"dome"==k[M].image?(T.push({image:"domeglow",x:R-192,y:_-160,size:4*H}),k[M].scale=1):("fly"==k[M].image||k[M].image.startsWith("biter"))&&D.push({x:k[M].x-k[M].size/2,y:k[M].y-k[M].size/2,size:k[M].size}),c(z,k[M].image,H,H,R,_,k[M].scale)}for(M=0;M<T.length;M++)c(F,T[M].image,T[M].size,T[M].size,T[M].x,T[M].y);let I=[];for(var P=0;P<Math.floor(s/2);P++){let e=(0,l.sc)(0,10),t=n[e];c(z,"biolumbush"+e,64,64,R=(0,l.sc)(64,o-64),_=(0,l.sc)(64,r-64),.75),I.push({color:t,x:R,y:_})}if((0,l.w7)()){for($.style.width=o.toString()+"px",$.style.height=r.toString()+"px",$.style.position="absolute",$.style.backgroundColor="#395060",$.style.setProperty("mix-blend-mode","multiply"),M=0;M<w.length;M++)c($,"light",256,256,32*w[M].x-48,32*w[M].y-45,.33);for(M=0;M<D.length;M++)c($,"light",256,256,D[M].x-16,D[M].y-16,.25);for(console.log(I),P=0;P<I.length;P++){let e=I[P];for(M=0;M<2;M++){let t=c($,"glowcolor_"+e.color,512,512,e.x-22,e.y-22,.175);t.style.width="512px",t.style.height="512px"}}for(P=0;P<Math.floor(s/3);P++){var j="biolumtree"+(0,l.sc)(0,1);let e=(0,l.v4)(i);for(c(z,j,64,64,R=(0,l.sc)(64,o-64),_=(0,l.sc)(64,r-64),1),x=-1;x<=1;x++)for(M=0;M<2;M++){let t=c($,"glowcolor_"+e,512,512,R+2,_+32*x,.25);t.style.width="512px",t.style.height="512px"}}}(0,l.xE)(z,1)}window.addEventListener("resize",(0,o.D)(y,100))}}]);
//# sourceMappingURL=990.bundle.js.map